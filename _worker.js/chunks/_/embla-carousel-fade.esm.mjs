function clampNumber(e,n,t){return Math.min(Math.max(e,n),t)}function isNumber(e){return"number"==typeof e&&!isNaN(e)}function Fade(e={}){let n,t,o,r,s=[],l=0,i=0,a=0,c=!1;function fadeToSelectedSnapInstantly(){setOpacities(n.selectedScrollSnap(),1)}function pointerUp(){c=!1}function pointerDown(){c=!1,l=0,i=0}function select(){const e=n.internalEngine().scrollBody.duration();i=e?0:1,c=!0,e||fadeToSelectedSnapInstantly()}function lockExcessiveScroll(e){const{scrollSnaps:t,location:o,target:r}=n.internalEngine();!isNumber(e)||s[e]<.5||(o.set(t[e]),r.set(o))}function setOpacities(e,t){n.scrollSnapList().forEach((o,r)=>{const i=Math.abs(t),d=s[r],p=r===e,u=clampNumber(p?d+i:d-i,0,1);s[r]=u;const f=p&&c,g=n.previousScrollSnap();f&&(s[g]=1-u),p&&function(e,t){const{index:o,dragHandler:r,scrollSnaps:s}=n.internalEngine(),i=r.pointerDown(),c=1/(s.length-1);let d=e,p=i?n.selectedScrollSnap():n.previousScrollSnap();if(i&&d===p){const e=-1*Math.sign(l);d=p,p=o.clone().set(p).add(e).get()}const u=p*c,f=(d-p)*c;a=u+f*t}(e,u),function(e){const t=n.internalEngine().slideRegistry[e],{scrollSnaps:o,containerRect:r}=n.internalEngine(),l=s[e];t.forEach(t=>{const s=n.slideNodes()[t].style,i=parseFloat(l.toFixed(2)),a=i>0,c=function(e){const{axis:t}=n.internalEngine();return`translate${t.scroll.toUpperCase()}(${t.direction(e)}px)`}(a?o[e]:r.width+2);a&&(s.transform=c),s.opacity=i.toString(),s.pointerEvents=l>.5?"auto":"none",a||(s.transform=c)})}(r)})}function getFadeIndex(){const{dragHandler:e,index:t,scrollBody:o}=n.internalEngine(),r=n.selectedScrollSnap();if(!e.pointerDown())return r;const s=Math.sign(o.velocity()),i=Math.sign(l),a=t.clone().set(r).add(-1*s).get();return s&&i?i===s?a:r:null}function settled(){const{target:e,location:o}=n.internalEngine(),r=e.get()-o.get(),a=Math.abs(r)>=1,c=getFadeIndex(),d=!isNumber(c);return function(e){const{dragHandler:n,scrollBody:o}=e.internalEngine(),r=n.pointerDown(),a=o.velocity(),c=o.duration(),d=getFadeIndex(),p=!isNumber(d);if(r){if(!a)return;l+=a,i=Math.abs(a/t),lockExcessiveScroll(d)}if(!r){if(!c||p)return;i+=(1-s[d])/c,i*=.68}p||setOpacities(d,i)}(n),!d&&!a&&s[c]>.999}function scrollProgress(){return a}return{name:"fade",options:e,init:function(e){n=e;const l=n.selectedScrollSnap(),{scrollBody:i,containerRect:a,axis:d}=n.internalEngine(),p=d.measureSize(a);t=clampNumber(.75*p,200,500),c=!1,s=n.scrollSnapList().map((e,n)=>n===l?1:0),o=i.settled,r=n.scrollProgress,i.settled=settled,n.scrollProgress=scrollProgress,n.on("select",select).on("slideFocus",fadeToSelectedSnapInstantly).on("pointerDown",pointerDown).on("pointerUp",pointerUp),function(){const{translate:e,slideLooper:t}=n.internalEngine();e.clear(),e.toggleActive(!1),t.loopPoints.forEach(({translate:e})=>{e.clear(),e.toggleActive(!1)})}(),fadeToSelectedSnapInstantly()},destroy:function(){const{scrollBody:e}=n.internalEngine();e.settled=o,n.scrollProgress=r,n.off("select",select).off("slideFocus",fadeToSelectedSnapInstantly).off("pointerDown",pointerDown).off("pointerUp",pointerUp),n.slideNodes().forEach(e=>{const n=e.style;n.opacity="",n.transform="",n.pointerEvents="",e.getAttribute("style")||e.removeAttribute("style")})}}}Fade.globalOptions=void 0;export{Fade as default};
//# sourceMappingURL=embla-carousel-fade.esm.mjs.map
