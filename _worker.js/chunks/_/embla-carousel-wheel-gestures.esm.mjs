function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends.apply(this,arguments)}function addVectors(e,t){if(e.length!==t.length)throw new Error("vectors must be same length");return e.map(function(e,n){return e+t[n]})}function absMax(e){return Math.max.apply(Math,e.map(Math.abs))}function deepFreeze(e){return Object.freeze(e),Object.values(e).forEach(function(e){null===e||"object"!=typeof e||Object.isFrozen(e)||deepFreeze(e)}),e}var e=[1,18,800];var t=[-1,-1,-1];var clampAxisDelta=function(e){return _extends({},e,{axisDelta:e.axisDelta.map(function(e){return t=e,n=-700,i=700,Math.min(Math.max(n,t),i);var t,n,i})})},n=deepFreeze({preventWheelAction:!0,reverseSign:[!0,!0,!1]});function WheelGestures(i){void 0===i&&(i={});var r,a,o,s=function(){var e={};function off(t,n){e[t]=(e[t]||[]).filter(function(e){return e!==n})}return deepFreeze({on:function(t,n){return e[t]=(e[t]||[]).concat(n),function(){return off(t,n)}},off:off,dispatch:function(t,n){t in e&&e[t].forEach(function(e){return e(n)})}})}(),u=s.on,c=s.off,l=s.dispatch,d=n,m={isStarted:!1,isStartPublished:!1,isMomentum:!1,startTime:0,lastAbsDelta:1/0,axisMovement:[0,0,0],axisVelocity:[0,0,0],accelerationFactors:[],scrollPoints:[],scrollPointsToMerge:[],willEndTimeout:400},v=!1,feedWheel=function(e){Array.isArray(e)?e.forEach(function(e){return processWheelEventData(e)}):processWheelEventData(e)},updateOptions=function(e){return void 0===e&&(e={}),Object.values(e).some(function(e){return null==e})?d:d=deepFreeze(_extends({},n,d,e))},publishWheel=function(e){var t=_extends({event:r,isStart:!1,isEnding:!1,isMomentumCancel:!1,isMomentum:m.isMomentum,axisDelta:[0,0,0],axisVelocity:m.axisVelocity,axisMovement:m.axisMovement,get axisMovementProjection(){return addVectors(t.axisMovement,t.axisVelocity.map(function(e){return void 0===t&&(t=.996),e*t/(1-t);var t}))}},e);l("wheel",_extends({},t,{previous:a})),a=t},processWheelEventData=function(n){var i,a,o,s,u=clampAxisDelta(function(e,n){if(!n)return e;var i=!0===n?t:n.map(function(e){return e?-1:1});return _extends({},e,{axisDelta:e.axisDelta.map(function(e,t){return e*i[t]})})}((a=(i=n).deltaX*e[i.deltaMode],o=i.deltaY*e[i.deltaMode],s=(i.deltaZ||0)*e[i.deltaMode],{timeStamp:i.timeStamp,axisDelta:[a,o,s]}),d.reverseSign)),c=u.axisDelta,l=u.timeStamp,f=absMax(c);n.preventDefault&&function(e,t){var n=d.preventWheelAction,i=t[0],r=t[1],a=t[2];if("boolean"==typeof n)return n;switch(n){case"x":return Math.abs(i)>=e;case"y":return Math.abs(r)>=e;case"z":return Math.abs(a)>=e;default:return!1}}(f,c)&&n.preventDefault(),m.isStarted?m.isMomentum&&f>Math.max(2,2*m.lastAbsDelta)&&(end(!0),start()):start(),0===f&&Object.is&&Object.is(n.deltaX,-0)?v=!0:(r=n,m.axisMovement=addVectors(m.axisMovement,c),m.lastAbsDelta=f,m.scrollPointsToMerge.push({axisDelta:c,timeStamp:l}),mergeScrollPointsCalcVelocity(),publishWheel({axisDelta:c,isStart:!m.isStartPublished}),m.isStartPublished=!0,willEnd())},mergeScrollPointsCalcVelocity=function(){var e;2===m.scrollPointsToMerge.length?(m.scrollPoints.unshift({axisDeltaSum:m.scrollPointsToMerge.map(function(e){return e.axisDelta}).reduce(addVectors),timeStamp:(e=m.scrollPointsToMerge.map(function(e){return e.timeStamp}),e.reduce(function(e,t){return e+t})/e.length)}),updateVelocity(),m.scrollPointsToMerge.length=0,m.scrollPoints.length=1,m.isMomentum||detectMomentum()):m.isStartPublished||updateStartVelocity()},updateStartVelocity=function(){var e;m.axisVelocity=(e=m.scrollPointsToMerge,e[e.length-1]).axisDelta.map(function(e){return e/m.willEndTimeout})},updateVelocity=function(){var e=m.scrollPoints,t=e[0],n=e[1];if(n&&t){var i=t.timeStamp-n.timeStamp;if(!(i<=0)){var r=t.axisDeltaSum.map(function(e){return e/i}),a=r.map(function(e,t){return e/(m.axisVelocity[t]||1)});m.axisVelocity=r,m.accelerationFactors.push(a),updateWillEndTimeout(i)}}},updateWillEndTimeout=function(e){var t=10*Math.ceil(e/10)*1.2;m.isMomentum||(t=Math.max(100,2*t)),m.willEndTimeout=Math.min(1e3,Math.round(t))},accelerationFactorInMomentumRange=function(e){return 0===e||e<=.96&&e>=.6},detectMomentum=function(){if(m.accelerationFactors.length>=5){if(v&&(v=!1,absMax(m.axisVelocity)>=.2))return void recognizedMomentum();var e=m.accelerationFactors.slice(-5);e.every(function(e){var t=!!e.reduce(function(e,t){return e&&e<1&&e===t?1:0}),n=e.filter(accelerationFactorInMomentumRange).length===e.length;return t||n})&&recognizedMomentum(),m.accelerationFactors=e}},recognizedMomentum=function(){m.isMomentum=!0},start=function(){(m={isStarted:!1,isStartPublished:!1,isMomentum:!1,startTime:0,lastAbsDelta:1/0,axisMovement:[0,0,0],axisVelocity:[0,0,0],accelerationFactors:[],scrollPoints:[],scrollPointsToMerge:[],willEndTimeout:400}).isStarted=!0,m.startTime=Date.now(),a=void 0,v=!1},willEnd=function(){clearTimeout(o),o=setTimeout(end,m.willEndTimeout)},end=function(e){void 0===e&&(e=!1),m.isStarted&&(m.isMomentum&&e?publishWheel({isEnding:!0,isMomentumCancel:!0}):publishWheel({isEnding:!0}),m.isMomentum=!1,m.isStarted=!1)},f=function(e){var t=[],unobserve=function(n){n.removeEventListener("wheel",e),t=t.filter(function(e){return e!==n})};return deepFreeze({observe:function(n){return n.addEventListener("wheel",e,{passive:!1}),t.push(n),function(){return unobserve(n)}},unobserve:unobserve,disconnect:function(){t.forEach(unobserve)}})}(feedWheel),h=f.observe,p=f.unobserve,M=f.disconnect;return updateOptions(i),deepFreeze({on:u,off:c,observe:h,unobserve:p,disconnect:M,feedWheel:feedWheel,updateOptions:updateOptions})}var i={active:!0,breakpoints:{},wheelDraggingClass:"is-wheel-dragging",forceWheelAxis:void 0,target:void 0};function WheelGesturesPlugin(e){var t;void 0===e&&(e={});var cleanup=function(){};return{name:"wheelGestures",options:e,init:function(n,r){var a,o,s=r.mergeOptions,u=r.optionsAtMedia,c=s(i,WheelGesturesPlugin.globalOptions),l=s(c,e);t=u(l);var d=n.internalEngine(),m=null!=(a=t.target)?a:n.containerNode().parentNode,v=null!=(o=t.forceWheelAxis)?o:d.options.axis,f=WheelGestures({preventWheelAction:v,reverseSign:[!0,!0,!1]});function updateSizeRelatedVariables(){b=("x"===v?d.containerRect.width:d.containerRect.height)/2}var h,p=f.observe(m),M=f.on("wheel",function(e){var n=e.axisDelta,i=n[0],r=n[1],a="x"===v?i:r,o="x"===v?r:i,s=e.isMomentum&&e.previous&&!e.previous.isMomentum,u=e.isEnding&&!e.isMomentum||s;Math.abs(a)>Math.abs(o)&&!g&&!e.isMomentum&&!E&&function(e){try{dispatchEvent(h=new MouseEvent("mousedown",e.event))}catch(e){return cleanup()}g=!0,x=0,document.documentElement.addEventListener("mousemove",preventNativeMouseHandler,!0),document.documentElement.addEventListener("mouseup",preventNativeMouseHandler,!0),void document.documentElement.addEventListener("mousedown",preventNativeMouseHandler,!0),t.wheelDraggingClass&&m.classList.add(t.wheelDraggingClass)}(e);E&&e.isEnding&&(E=!1);if(!g)return;if(function(e){var t=checkIfAtBoundary(e),n=t.isAtBoundary,i=t.primaryAxisDelta;if(n&&!e.isMomentum){if((x+=Math.abs(i))>b)return E=!0,wheelGestureEnded(e),!0}else x=0;return!1}(e))return;u?wheelGestureEnded(e):dispatchEvent(createRelativeMouseEvent("mousemove",e))}),g=!1,x=0,b=0,E=!1;function wheelGestureEnded(e){g=!1,dispatchEvent(createRelativeMouseEvent("mouseup",e)),removeNativeMouseEventListeners(),t.wheelDraggingClass&&m.classList.remove(t.wheelDraggingClass)}function removeNativeMouseEventListeners(){document.documentElement.removeEventListener("mousemove",preventNativeMouseHandler,!0),document.documentElement.removeEventListener("mouseup",preventNativeMouseHandler,!0),document.documentElement.removeEventListener("mousedown",preventNativeMouseHandler,!0)}function preventNativeMouseHandler(e){g&&e.isTrusted&&e.stopImmediatePropagation()}function createRelativeMouseEvent(e,t){var n,i;if(v===d.options.axis){var r=t.axisMovement;n=r[0],i=r[1]}else{var a=t.axisMovement;i=a[0],n=a[1]}if(checkIfAtBoundary(t).isAtBoundary){var o=Math.min(x/b,1),s=x*(n>0?-1:1)*(.25+.5*o);n+=s,i+=s}if(!d.options.skipSnaps&&!d.options.dragFree){var u=d.containerRect.width,c=d.containerRect.height;n=n<0?Math.max(n,-u):Math.min(n,u),i=i<0?Math.max(i,-c):Math.min(i,c)}return new MouseEvent(e,{clientX:h.clientX+n,clientY:h.clientY+i,screenX:h.screenX+n,screenY:h.screenY+i,movementX:n,movementY:i,button:0,bubbles:!0,cancelable:!0,composed:!0})}function dispatchEvent(e){n.containerNode().dispatchEvent(e)}function checkIfAtBoundary(e){var t=e.axisDelta,i=t[0],r=t[1],a=n.scrollProgress(),o="x"===v?i:r;return{isAtBoundary:o<0&&!(a<1)||o>0&&!(a>0),primaryAxisDelta:o}}updateSizeRelatedVariables(),n.on("resize",updateSizeRelatedVariables),cleanup=function(){p(),M(),n.off("resize",updateSizeRelatedVariables),removeNativeMouseEventListeners()}},destroy:function(){return cleanup()}}}WheelGesturesPlugin.globalOptions=void 0;export{WheelGesturesPlugin,WheelGesturesPlugin as default};
//# sourceMappingURL=embla-carousel-wheel-gestures.esm.mjs.map
