import{e as t,C as n,c as e,D as o,u as r,E as i,l as a}from"../../nitro/nitro.mjs";import"node:buffer";import"node:events";import"node:process";import"node:timers";import"node:async_hooks";import"cloudflare:workers";import"node:path";function indent(t,{ignoreFirstLine:n=!1}={}){return t.split("\n").map((t,e)=>n&&0===e?t:"  "+t).join("\n")}function textContent(t){if("string"==typeof t)return t;return t.slice(2).map(t=>textContent(t)).join("")}function htmlAttributes(t){return Object.entries(t).map(([t,n])=>`${t}="${n}"`).join(" ")}function heading(t,n){const[e]=t,o=Number(e.slice(1)),r=n.flow(t,n);return"#".repeat(o)+" "+r+n.context.blockSeparator}const s=new Set(["p","h1","h2","h3","h4","h5","h6","li"]),c=new Set(["br","hr","img","input","link","meta","source","track","wbr"]),l=new Set(["table"]);function html(t,n,e){const[o,r,...i]=function(t){const[n,e]=t;return"pre"===n?[n,{language:e.language},e.code||textContent(t)]:t}(t),a=s.has(String(e?.[0]))&&i.every(t=>"string"==typeof t),u=c.has(String(o)),m=!n.context.html&&l.has(String(o))?n.applyContext({html:!0}):null,f=i.map(e=>n.one(e,n,t)).join("").trim();m&&n.applyContext(m);const p=Object.keys(r).length>0?` ${htmlAttributes(r)}`:"";return u?`<${o}${p} />`+(a?"":n.context.blockSeparator):a?`<${o}${p}>${f}</${o}>`:`<${o}${p}>\n${function(t,n){return n.context.html?indent(t):(t.trim().startsWith("<")?"":"\n")+t+(t.trim().endsWith(">")?"":"\n")}(f,n)}\n</${o}>`+n.context.blockSeparator}const u={code:function(t,n){return`\`${textContent(t)}\``},pre:function(t,n){const[e,o,...r]=t;return"```"+(o.language||"")+(o.filename?" ["+o.filename+"]":"")+(o.meta||"")+"\n"+String(t[1]?.code||r.join("")).trim()+"\n```"+n.context.blockSeparator},hr:function(t,n){return"---"+n.context.blockSeparator},h1:heading,h2:heading,h3:heading,h4:heading,h5:heading,h6:heading,p:function(t,n){return t.slice(2).map(t=>n.one(t,n)).join("")+n.context.blockSeparator},a:function(t,n){const[e,o]=t;return`[${n.flow(t,n)}](${o.href})`},ul:function(t,n){const e=t.slice(2),o=n.applyContext({list:!0,order:!1});let r=e.map(t=>n.one(t,n)).join("").trim();return o.list?r="\n"+indent(r):r+=n.context.blockSeparator,n.applyContext(o),r},ol:function(t,n){const e=t.slice(2),o=n.applyContext({list:!0,order:1});let r=e.map(t=>n.one(t,n)).join("").trim();return o.list?r="\n"+indent(r):r+=n.context.blockSeparator,n.applyContext(o),r},li:function(t,n){const e=t.slice(2),o=n.context.order;let r=o?`${o}. `:"- ";if((t[1].className&&Array.isArray(t[1].className)?t[1].className.join(" "):String(t[1].className)).includes("task-list-item")){r+=e.shift()[1].checked?"[x] ":"[ ] "}const i=e.map(t=>n.one(t,n)).join("").trim();return o&&n.applyContext({order:o+1}),`${r}${i}\n`},html:html,strong:function(t,n){return`**${textContent(t)}**`},em:function(t,n){return`*${textContent(t)}*`},blockquote:function(t,n){return t.slice(2).map(t=>n.one(t,n)).join("").trim().split("\n").map(t=>`> ${t}`).join("\n")+n.context.blockSeparator},img:function(t,n){const[e,o]=t;return`![${o.alt}](${o.src})`},del:function(t,n){return`~~${textContent(t)}~~`},mdc:function(t,n){const[e,o,...r]=t;if("table"===e)return html(t,n);const i=r.every(t=>"string"==typeof t),a=r.map(t=>n.one(t,n)).join("").trim(),s=Object.keys(o).length>0?`{${htmlAttributes(o)}}`:"";return"span"===e?`[${a}]${s}`:i?`:${e}${a&&`[${a}]`}${s}`:`::${e}${s}\n${a}\n::`+n.context.blockSeparator}};function one(t,n,e){if("string"==typeof t)return t;if(n.context.html)return n.handlers.html(t,n,e);const o=n.context.handlers[t[0]]||n.handlers[t[0]];return o?o(t,n,e):"markdown/mdc"===n.context.format?n.handlers.mdc(t,n,e):n.handlers.html(t,n,e)}function flow(t,n,e){const o=t.slice(2);let r="";for(const i of o)r+=one(i,n,e||t);return r}const m={format:"markdown/mdc",removeLastStyle:!0};function stringify(t,n={}){const e=function(t={}){const n={blockSeparator:"\n\n",format:"markdown/mdc",handlers:{},...t,html:"text/html"===t.format};return{handlers:u,context:n,flow:flow,one:one,applyContext:t=>{const e={};for(const[o,r]of Object.entries(t))e[o]=n[o],n[o]=r;return e}}}(n={...m,...n}),o=t.value,r=o.length-1;return o.map((t,o)=>o===r&&n.removeLastStyle&&"style"===t[0]?"":one(t,e)).join("").trim()+"\n"}const f=t(async t=>{var s,c;const l=n(t)["slug.md"];if(!(null==l?void 0:l.endsWith(".md")))throw e({statusCode:404,statusMessage:"Page not found",fatal:!0});const u=o(l.replace(".md","")),m=r(t).public;let f="docs";if(null==(s=m.i18n)?void 0:s.locales){const t=u.split("/").filter(Boolean)[0],n=m.i18n.locales.map(t=>"string"==typeof t?t:t.code);t&&n.includes(t)?f=`docs_${t}`:m.i18n.defaultLocale&&(f=`docs_${m.i18n.defaultLocale}`)}const p=await i(t,f).path(u).first();if(!p)throw e({statusCode:404,statusMessage:"Page not found",fatal:!0});return"h1"!==(null==(c=p.body.value[0])?void 0:c[0])&&(p.body.value.unshift(["blockquote",{},p.description]),p.body.value.unshift(["h1",{},p.title])),a(t,"Content-Type","text/markdown; charset=utf-8"),stringify({...p.body},{format:"markdown/html"})});export{f as default};
//# sourceMappingURL=_...slug_.md.get.mjs.map
