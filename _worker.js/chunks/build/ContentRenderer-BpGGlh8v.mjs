import{c9 as e,cg as t,cw as o,bO as n,bP as r,cx as a,cy as s,T as p}from"../nitro/nitro.mjs";import{f as l,n as u}from"./node-Ta6SvKQA.mjs";import{v as i,A as c}from"./server.mjs";const d=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];const m="default",f=/^@|^v-on:/,g=/^:|^v-bind:/,v=/^v-model/,y=["select","textarea","input"],b=["math","svg"],h=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(e=>[e,`prose-${e}`])),C=["script","base"],P=i.defineComponent({name:"MDCRenderer",props:{body:{type:Object,required:!0},data:{type:Object,default:()=>({})},class:{type:[String,Object],default:void 0},tag:{type:[String,Boolean],default:void 0},prose:{type:Boolean,default:void 0},components:{type:Object,default:()=>({})},unwrap:{type:[Boolean,String],default:!1}},async setup(e){const t=i.getCurrentInstance()?.appContext?.app,o=t?.$nuxt,n=o?.$route||o?._route,{mdc:r}=o?.$config?.public||{},a=i.computed(()=>({...r?.components?.prose&&!1!==e.prose?h:{},...r?.components?.map||{},...i.toRaw(e.data?.mdc?.components||{}),...e.components})),s=i.computed(()=>{const t=(e.body?.children||[]).map(e=>e.tag||e.type).filter(e=>!d.includes(e));return Array.from(new Set(t)).sort().join(".")}),p=i.reactive({...e.data});return i.watch(()=>e.data,e=>{Object.assign(p,e)}),await async function(e,t){if(!e)return;const o=Array.from(new Set(loadComponents(e,t)));function loadComponents(e,t){const o=e.tag;if("text"===e.type||"binding"===o||"comment"===e.type)return[];const n=findMappedTag(e,t.tags);if(isUnresolvableTag(n))return[];const r=[];"root"===e.type||d.includes(n)||r.push(n);for(const o of e.children||[])r.push(...loadComponents(o,t));return r}await Promise.all(o.map(async e=>{if(e?.render||e?.ssrRender||e?.__ssrInlineRender)return;const t=resolveComponentInstance(e);t?.__asyncLoader&&!t.__asyncResolved&&await t.__asyncLoader()}))}(e.body,{tags:a.value}),{tags:a,contentKey:s,route:n,runtimeData:p,updateRuntimeData:function(e,t){const o=e.split(".").length-1;return e.split(".").reduce((e,n,r)=>r==o&&e?(e[n]=t,e[n]):"object"==typeof e?e[n]:void 0,p)}}},render(e){const{tags:t,tag:o,body:n,data:r,contentKey:a,route:s,unwrap:p,runtimeData:u,updateRuntimeData:c}=e;if(!n)return null;const d={...r,tags:t,$route:s,runtimeData:u,updateRuntimeData:c},m=!1!==o?resolveComponentInstance(o||d.component?.name||d.component||"div"):void 0;return m?i.h(m,{...d.component?.props,class:e.class,...this.$attrs,key:a},{default:defaultSlotRenderer}):defaultSlotRenderer?.();function defaultSlotRenderer(){const e=_renderSlots(n,i.h,{documentMeta:d,parentScope:d,resolveComponent:resolveComponentInstance});return e?.default?p?l(e.default(),"string"==typeof p?p.split(" "):["*"]):e.default():null}}});function _renderNode(e,t,o,n){const{documentMeta:r,parentScope:p,resolveComponent:l}=o;if("text"===e.type)return t(i.Text,e.value);if("comment"===e.type)return t(i.Comment,null,e.value);const c=e.tag,d=findMappedTag(e,r.tags);if("binding"===e.tag)return function(e,t,o,n={}){const r={...o.runtimeData,...n,$document:o,$doc:o},a=/\.|\[(\d+)\]/,s=e.props?.value.trim().split(a).filter(Boolean),p=s.reduce((e,t)=>{if(e&&t in e)return"function"==typeof e[t]?e[t]():e[t]},r),l=e.props?.defaultValue;return t(i.Text,p??l??"")}(e,t,r,p);const m=isUnresolvableTag(d)?e=>e:l;if(C.includes(d))return t("pre",{class:"mdc-renderer-dangerous-tag"},"<"+d+">"+u(e)+"</"+d+">");const b=m(d);"object"==typeof b&&(b.tag=c);const h=function(e,t){const{tag:o="",props:n={}}=e;return Object.keys(n).reduce(function(e,r){if("__ignoreMap"===r)return e;const p=n[r];if(v.test(r))return function(e,t,o,n,{native:r}){const a=e.match(/^v-model:([^=]+)/)?.[1]||"modelValue",s=r?"onInput":`onUpdate:${a}`;return o[r?"value":a]=evalInContext(t,n.runtimeData),o[s]=e=>{n.updateRuntimeData(t,r?e.target?.value:e)},o}(r,p,e,t,{native:y.includes(o)});if("v-bind"===r)return function(e,t,o,n){const r=evalInContext(t,n);return o=Object.assign(o,r),o}(0,p,e,t);if(f.test(r))return function(e,t,o,n){return e=e.replace(f,""),o.on=o.on||{},o.on[e]=()=>evalInContext(t,n),o}(r,p,e,t);if(g.test(r))return function(e,t,o,n){return e=e.replace(g,""),o[e]=evalInContext(t,n),o}(r,p,e,t);const{attribute:l}=a(s,r);return Array.isArray(p)&&p.every(e=>"string"==typeof e)?(e[l]=p.join(" "),e):(e[l]=p,e)},{})}(e,r);return n&&(h.key=n),t(b,h,_renderSlots(e,t,{documentMeta:r,parentScope:{...p,...h},resolveComponent:m}))}function _renderSlots(e,t,o){const{documentMeta:n,parentScope:r,resolveComponent:a}=o,s=(e.children||[]).reduce((e,t)=>{if(!function(e){return"template"===e.tag}(t))return e[m].children.push(t),e;const o=function(e){let t="";for(const o of Object.keys(e.props||{}))if(o.startsWith("#")||o.startsWith("v-slot:")){t=o.split(/[:#]/,2)[1];break}return t||m}(t);return e[o]=e[o]||{props:{},children:[]},"element"===t.type&&(e[o].props=t.props,e[o].children.push(...t.children||[])),e},{[m]:{props:{},children:[]}}),p=Object.entries(s).reduce((e,[o,{props:s,children:p}])=>p.length?(e[o]=(e={})=>{const o=(u=e,Object.keys(s||{}).reduce((e,t)=>{const o=function(e,t){return t.split(".").reduce((e,t)=>e&&e[t],e)}(u,t);return void 0!==o&&(e[t]=o),e},{}));var u;let c=p.map((e,s)=>_renderNode(e,t,{documentMeta:n,parentScope:{...r,...o},resolveComponent:a},String(e.props?.key||s)));return s?.unwrap&&(c=l(c,s.unwrap)),function(e){const t=[];for(const o of e){const e=t[t.length-1];o.type===i.Text&&e?.type===i.Text?e.children=e.children+o.children:t.push(o)}return t}(c)},e):e,{});return p}const resolveComponentInstance=e=>{if("string"==typeof e){if(d.includes(e))return e;const o=i.resolveComponent(t(e),!1);return e&&"AsyncComponentWrapper"!==o?.name?"string"==typeof o?o:"setup"in o?i.defineAsyncComponent(()=>new Promise(e=>e(o))):o:o}return e};function evalInContext(e,t){const o=e.split(".").reduce((e,t)=>"object"==typeof e?e[t]:void 0,t);return void 0===o?p(e):o}function isUnresolvableTag(e){return b.includes(e)}function findMappedTag(e,n){const r=e.tag;return r&&void 0===e.props?.__ignoreMap&&(n[r]||n[t(r)]||n[o(e.tag)])||r}const x=P.setup;P.setup=(e,t)=>{const o=i.useSSRContext();return(o.modules||(o.modules=new Set)).add("../../node_modules/.pnpm/@nuxtjs+mdc@0.17.4_magicast@0.3.5/node_modules/@nuxtjs/mdc/dist/runtime/components/MDCRenderer.vue"),x?x(e,t):void 0};const j=Object.assign(P,{__name:"MDCRenderer"}),S=["ProseA","ProseAccordion","ProseAccordionItem","ProseBadge","ProseBlockquote","ProseCallout","ProseCard","ProseCardGroup","ProseCode","ProseCodeCollapse","ProseCodeGroup","ProseCodeIcon","ProseCodePreview","ProseCodeTree","ProseCollapsible","ProseEm","ProseField","ProseFieldGroup","ProseH1","ProseH2","ProseH3","ProseH4","ProseHr","ProseIcon","ProseImg","ProseKbd","ProseLi","ProseOl","ProseP","ProsePre","ProseScript","ProseSteps","ProseStrong","ProseTable","ProseTabs","ProseTabsItem","ProseTbody","ProseTd","ProseTh","ProseThead","ProseTr","ProseUl","ProseCaution","ProseNote","ProseTip","ProseWarning","ProseH5","ProseH6","Icon"],_=["BrowserFrame","TemplateCore","TemplateFeatures","ExampleAlert","ExampleCard","ExampleFulltextContentSearch","ExampleFulltextFusejs","ExampleFulltextMiniSearch","ExampleHero","ExampleIconCard","ExampleLandingHero","ExampleTitle","UButton","UColorModeImage","UPageFeature","UPageHero","UPageSection"],T=Object.freeze(Object.defineProperty({__proto__:null,BrowserFrame:()=>import("./BrowserFrame-C05sf8ue.mjs"),ExampleAlert:()=>import("./ExampleAlert-CrpgJV32.mjs"),ExampleCard:()=>import("./ExampleCard-CpOCmL8N.mjs"),ExampleFulltextContentSearch:()=>import("./ExampleFulltextContentSearch-DYBmYMtX.mjs"),ExampleFulltextFusejs:()=>import("./ExampleFulltextFusejs-Bg6fxLpS.mjs"),ExampleFulltextMiniSearch:()=>import("./ExampleFulltextMiniSearch-CEUkzOrR.mjs"),ExampleHero:()=>import("./ExampleHero-CK956Mxk.mjs"),ExampleIconCard:()=>import("./ExampleIconCard-DdnwwXQ5.mjs"),ExampleLandingHero:()=>import("./ExampleLandingHero-C-_vXcIz.mjs"),ExampleTitle:()=>import("./ExampleTitle-DvTnnfSt.mjs"),TemplateCore:()=>import("./TemplateCore-CjGJysBm.mjs"),TemplateFeatures:()=>import("./TemplateFeatures-BA6gMGOo.mjs"),UButton:()=>import("./server.mjs").then(function(e){return e.b3}).then(e=>e.ah),UColorModeImage:()=>import("./ColorModeImage-Rt1TJEDo.mjs"),UPageFeature:()=>import("./PageFeature-DYNklkx1.mjs"),UPageHero:()=>import("./PageHero-BiRB8iOx.mjs"),UPageSection:()=>import("./PageSection-BwbF56Ao.mjs"),globalComponents:S,localComponents:_},Symbol.toStringTag,{value:"Module"})),E={__name:"ContentRenderer",__ssrInlineRender:!0,props:{value:{type:Object,required:!0},excerpt:{type:Boolean,default:!1},tag:{type:String,default:"div"},components:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},prose:{type:Boolean,default:void 0},class:{type:[String,Object],default:void 0},unwrap:{type:[Boolean,String],default:!1}},setup(a){const s=["render","ssrRender","__ssrInlineRender"],p=a,l=!1,u=i.computed(()=>{let t=p.value.body||p.value;return p.excerpt&&p.value.excerpt&&(t=p.value.excerpt),"minimal"===t.type||"minimark"===t.type?e({value:t.value}):t}),m=i.computed(()=>!u.value?.children?.length),f=i.computed(()=>{const{body:e,excerpt:t,...o}=p.value;return{...o,...p.data}}),g=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(e=>[e,`prose-${e}`])),{mdc:v}=c().public||{},y=i.computed(()=>({...v?.components?.prose&&!1!==p.prose?g:{},...v?.components?.map||{},...i.toRaw(p.data?.mdc?.components||{}),...p.components})),b=i.computed(()=>u.value?function(e,t){if(!e)return;const o=Array.from(new Set(loadComponents(e,t))),n={};for(const[e,t]of o)n[e]||("object"==typeof t&&s.some(e=>Object.hasOwnProperty.call(t,e))?n[e]=t:n[e]=resolveVueComponent(t));return n}(u.value,{tags:y.value}):{});function resolveVueComponent(e){let o=e;if("string"==typeof e){if(d.includes(e))return e;if(S.includes(t(e)))o=i.resolveComponent(e,!1);else if(_.includes(t(e))){const loader=()=>Promise.resolve().then(()=>T).then(o=>{const n=o[t(e)];return n?n():void 0});o=i.defineAsyncComponent(loader)}if("string"==typeof o)return o}if(!o)return o;const n=o;return"__asyncLoader"in n?n:"setup"in n?i.defineAsyncComponent(()=>Promise.resolve(n)):n}function loadComponents(e,n){const r=e.tag;if("text"===e.type||"binding"===r||"comment"===e.type)return[];const a=function(e,n){const r=e.tag;if(!r||void 0!==e.props?.__ignoreMap)return r;return n[r]||n[t(r)]||n[o(e.tag)]||r}(e,n.tags),s=[];"root"===e.type||d.includes(a)||s.push([r,a]);for(const t of e.children||[])s.push(...loadComponents(t,n));return s}return(e,t,o,s)=>{m.value?r(e.$slots,"empty",{body:u.value,data:f.value,dataContentId:i.unref(l)?a.value.id:void 0},null,t,o):t(n(j,i.mergeProps({body:u.value,data:f.value,class:p.class,tag:p.tag,prose:p.prose,unwrap:p.unwrap,components:b.value,"data-content-id":i.unref(l)?a.value.id:void 0},s),null,o))}}},w=E.setup;E.setup=(e,t)=>{const o=i.useSSRContext();return(o.modules||(o.modules=new Set)).add("../../dist/runtime/components/ContentRenderer.vue"),w?w(e,t):void 0};const O=Object.assign(E,{__name:"ContentRenderer"});export{O as _};
//# sourceMappingURL=ContentRenderer-BpGGlh8v.mjs.map
