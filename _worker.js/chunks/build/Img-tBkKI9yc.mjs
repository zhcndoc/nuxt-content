import{aQ as e,b1 as t,aS as a,bl as o,bm as n,bn as i,b5 as l,bj as r,bC as s,cA as u,cB as c,D as d,af as p,j as f,bO as m,bV as h,bQ as v}from"../nitro/nitro.mjs";import{ay as y,az as x,aA as C,aB as g,aC as b,aD as w,f as k,B as _,v as V,t as N,A as B,aE as S,I as P,aF as $,aG as z,aH as E,aI as A}from"./server.mjs";import"node:buffer";import"node:events";import"node:process";import"node:timers";import"node:async_hooks";import"cloudflare:workers";import"node:path";function delay(e){return Promise.resolve().then(()=>{e()})}const q=e({name:"AnimatePresence",inheritAttrs:!0,__name:"AnimatePresence",props:{mode:{default:"sync"},initial:{type:Boolean,default:!0},as:{},custom:{},onExitComplete:{},anchorX:{default:"left"}},setup(e){const d=e;C(d);const{addPopStyle:p,removePopStyle:f,styles:m}=function(e){const t=new WeakMap,a=y();return{addPopStyle:function(o){if("popLayout"!==e.mode)return;const n=o.element,i=n.offsetParent,l=i instanceof HTMLElement&&i.offsetWidth||0,r={height:n.offsetHeight||0,width:n.offsetWidth||0,top:n.offsetTop,left:n.offsetLeft,right:0};r.right=l-r.width-r.left;const s="left"===e.anchorX?`left: ${r.left}`:`right: ${r.right}`;o.element.dataset.motionPopId=o.id;const u=document.createElement("style");a.value.nonce&&(u.nonce=a.value.nonce),t.set(o,u),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`\n    [data-motion-pop-id="${o.id}"] {\n      position: absolute !important;\n      width: ${r.width}px !important;\n      height: ${r.height}px !important;\n      top: ${r.top}px !important;\n      ${s}px !important;\n      }\n      `)},removePopStyle:function(e){const a=t.get(e);a&&(t.delete(e),x.render(()=>{document.head.removeChild(a)}))},styles:t}}(d);function enter(e){const t=g.get(e);t&&(f(t),t.isVShow=!0,b(e),delay(()=>{t.setActive("exit",!1)}))}const h=new Map;function exit(e,t){var a;const o=function(e){let t=e;for(;t;){if(g.get(t))return t;t=t.firstElementChild}return null}(e),n=g.get(o);if(!o||!n)return t(),void(0===h.size&&(null==(a=d.onExitComplete)||a.call(d)));function doneCallback(e){var a,i;if(null==(a=null==e?void 0:e.detail)?void 0:a.isExit){const e=n.visualElement.projection;if((null==e?void 0:e.animationProgress)>0&&!n.isSafeToRemove&&!n.isVShow)return;b(o),h.delete(o),0===h.size&&(null==(i=d.onExitComplete)||i.call(d)),m.has(n)?f(n):n.willUpdate("done"),t(),o.isConnected||n.unmount(!0)}}h.set(o,!0),b(o),p(n),delay(()=>{n.setActive("exit",!0),w.set(o,doneCallback),o.addEventListener("motioncomplete",doneCallback)})}t(()=>{h.clear()});const v=a(()=>"wait"!==d.mode?{tag:d.as}:{mode:"wait"===d.mode?"out-in":void 0});return(e,t)=>(n(),o(s("wait"===e.mode?u:c),r({css:!1},v.value,{appear:"",onEnter:enter,onLeave:exit}),{default:i(()=>[l(e.$slots,"default")]),_:3},16))}}),j={slots:{base:"rounded-md",overlay:"fixed inset-0 bg-default/75 backdrop-blur-sm will-change-opacity",content:"fixed inset-0 flex items-center justify-center cursor-zoom-out focus:outline-none p-4 sm:p-8"},variants:{zoom:{true:"will-change-transform"},open:{true:""}},compoundVariants:[{zoom:!0,open:!1,class:"cursor-zoom-in"}]},I=Object.assign({inheritAttrs:!1},{__name:"ProseImg",__ssrInlineRender:!0,props:{src:{type:String,required:!0},alt:{type:String,required:!0},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},class:{type:null,required:!1},zoom:{type:Boolean,required:!1,default:!0},ui:{type:null,required:!1}},setup(e){const t=e,a=k(),[o,n]=_(),i=V.ref(!1),l=V.computed(()=>N({extend:N(j),...a.uiPro?.prose?.img||{}})({zoom:t.zoom,open:i.value})),r=V.computed(()=>{if(t.src?.startsWith("/")&&!t.src.startsWith("//")){const e=d(p(B().app.baseURL));if("/"!==e&&!t.src.startsWith(e))return f(e,t.src)}return t.src}),s=V.computed(()=>`${r.value}::${V.useId()}`);return t.zoom&&S(void 0,"scroll",()=>{i.value=!1}),(a,u,c,d)=>{u("\x3c!--[--\x3e"),u(m(V.unref(o),null,{default:V.withCtx((o,n,i,s)=>{if(!n)return[(V.openBlock(),V.createBlock(V.resolveDynamicComponent(V.unref(P)),V.mergeProps({src:r.value,alt:e.alt,width:e.width,height:e.height},a.$attrs,{class:l.value.base({class:[t.ui?.base,t.class]})}),null,16,["src","alt","width","height","class"]))];h(n,V.createVNode(V.resolveDynamicComponent(V.unref(P)),V.mergeProps({src:r.value,alt:e.alt,width:e.width,height:e.height},a.$attrs,{class:l.value.base({class:[t.ui?.base,t.class]})}),null),i,s)}),_:1},c)),e.zoom?u(m(V.unref(A),{open:i.value,"onUpdate:open":e=>i.value=e,modal:!1},{default:V.withCtx(({close:e},a,o,r)=>{if(!a)return[V.createVNode(V.unref($),{"as-child":""},{default:V.withCtx(()=>[V.createVNode(V.unref(z),{"layout-id":s.value,"as-child":"",transition:{type:"spring",bounce:.2,duration:.4}},{default:V.withCtx(()=>[V.createVNode(V.unref(n))]),_:1},8,["layout-id"])]),_:1}),V.createVNode(V.unref(E),null,{default:V.withCtx(()=>[V.createVNode(V.unref(q),null,{default:V.withCtx(()=>[i.value?(V.openBlock(),V.createBlock(V.unref(z),{key:0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},class:l.value.overlay({class:[t.ui?.overlay]})},null,8,["class"])):V.createCommentVNode("",!0),i.value?(V.openBlock(),V.createBlock("div",{key:1,class:l.value.content({class:[t.ui?.content]}),onClick:e},[V.createVNode(V.unref(z),{"as-child":"","layout-id":s.value,transition:{type:"spring",bounce:.2,duration:.4}},{default:V.withCtx(()=>[V.createVNode(V.unref(n))]),_:1},8,["layout-id"])],10,["onClick"])):V.createCommentVNode("",!0)]),_:2},1024)]),_:2},1024)];a(m(V.unref($),{"as-child":""},{default:V.withCtx((e,t,a,o)=>{if(!t)return[V.createVNode(V.unref(z),{"layout-id":s.value,"as-child":"",transition:{type:"spring",bounce:.2,duration:.4}},{default:V.withCtx(()=>[V.createVNode(V.unref(n))]),_:1},8,["layout-id"])];t(m(V.unref(z),{"layout-id":s.value,"as-child":"",transition:{type:"spring",bounce:.2,duration:.4}},{default:V.withCtx((e,t,a,o)=>{if(!t)return[V.createVNode(V.unref(n))];t(m(V.unref(n),null,null,a,o))}),_:2},a,o))}),_:2},o,r)),a(m(V.unref(E),null,{default:V.withCtx((a,o,r,u)=>{if(!o)return[V.createVNode(V.unref(q),null,{default:V.withCtx(()=>[i.value?(V.openBlock(),V.createBlock(V.unref(z),{key:0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},class:l.value.overlay({class:[t.ui?.overlay]})},null,8,["class"])):V.createCommentVNode("",!0),i.value?(V.openBlock(),V.createBlock("div",{key:1,class:l.value.content({class:[t.ui?.content]}),onClick:e},[V.createVNode(V.unref(z),{"as-child":"","layout-id":s.value,transition:{type:"spring",bounce:.2,duration:.4}},{default:V.withCtx(()=>[V.createVNode(V.unref(n))]),_:1},8,["layout-id"])],10,["onClick"])):V.createCommentVNode("",!0)]),_:2},1024)];o(m(V.unref(q),null,{default:V.withCtx((a,o,r,u)=>{if(!o)return[i.value?(V.openBlock(),V.createBlock(V.unref(z),{key:0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},class:l.value.overlay({class:[t.ui?.overlay]})},null,8,["class"])):V.createCommentVNode("",!0),i.value?(V.openBlock(),V.createBlock("div",{key:1,class:l.value.content({class:[t.ui?.content]}),onClick:e},[V.createVNode(V.unref(z),{"as-child":"","layout-id":s.value,transition:{type:"spring",bounce:.2,duration:.4}},{default:V.withCtx(()=>[V.createVNode(V.unref(n))]),_:1},8,["layout-id"])],10,["onClick"])):V.createCommentVNode("",!0)];i.value?o(m(V.unref(z),{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},class:l.value.overlay({class:[t.ui?.overlay]})},null,r,u)):o("\x3c!----\x3e"),i.value?(o(`<div class="${v(l.value.content({class:[t.ui?.content]}))}"${u}>`),o(m(V.unref(z),{"as-child":"","layout-id":s.value,transition:{type:"spring",bounce:.2,duration:.4}},{default:V.withCtx((e,t,a,o)=>{if(!t)return[V.createVNode(V.unref(n))];t(m(V.unref(n),null,null,a,o))}),_:2},r,u)),o("</div>")):o("\x3c!----\x3e")}),_:2},r,u))}),_:2},o,r))}),_:1},c)):u(m(V.unref(n),null,null,c)),u("\x3c!--]--\x3e")}}}),L=I.setup;I.setup=(e,t)=>{const a=V.useSSRContext();return(a.modules||(a.modules=new Set)).add("../../node_modules/.pnpm/@nuxt+ui-pro@3.3.3_@babel+parser@7.28.4_change-case@5.4.4_db0@0.3.2_@electric-sql+pglit_506d3e6c3d060cad1256bab0b75e89ac/node_modules/@nuxt/ui-pro/dist/runtime/components/prose/Img.vue"),L?L(e,t):void 0};export{I as default};
//# sourceMappingURL=Img-tBkKI9yc.mjs.map
