import{s as Ve,_ as We,u as z,a as me,r as L,o as Be,b as He,c as Ue,d as O,e as $,f as V,g as ne,n as ze,F as Fe,h as E,w as se,T as oe,t as Xe,i as re,j as ee,k as be,l as Ke,m as ae,p as we,q as Ge,v as Ye,x as Qe,y as Ze,z as ve}from"#entry";import{loadDatabaseAdapter as S}from"./CzuRwbsR.js";const Je=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],et=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",k=[];class it{_data=new N;_hash=new N([...Je]);_nDataBytes=0;_minBufferSize=0;finalize(e){e&&this._append(e);const t=this._nDataBytes*8,i=this._data.sigBytes*8;return this._data.words[i>>>5]|=128<<24-i%32,this._data.words[(i+64>>>9<<4)+14]=Math.floor(t/4294967296),this._data.words[(i+64>>>9<<4)+15]=t,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(e,t){const i=this._hash.words;let o=i[0],s=i[1],r=i[2],a=i[3],l=i[4],p=i[5],c=i[6],y=i[7];for(let u=0;u<64;u++){if(u<16)k[u]=e[t+u]|0;else{const m=k[u-15],v=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,T=k[u-2],C=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;k[u]=v+k[u-7]+C+k[u-16]}const d=l&p^~l&c,g=o&s^o&r^s&r,h=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),f=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),b=y+f+d+et[u]+k[u],x=h+g;y=c,c=p,p=l,l=a+b|0,a=r,r=s,s=o,o=b+x|0}i[0]=i[0]+o|0,i[1]=i[1]+s|0,i[2]=i[2]+r|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0,i[5]=i[5]+p|0,i[6]=i[6]+c|0,i[7]=i[7]+y|0}_append(e){typeof e=="string"&&(e=N.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let t,i=this._data.sigBytes/64;e?i=Math.ceil(i):i=Math.max((i|0)-this._minBufferSize,0);const o=i*16,s=Math.min(o*4,this._data.sigBytes);if(o){for(let r=0;r<o;r+=16)this._doProcessBlock(this._data.words,r);t=this._data.words.splice(0,o),this._data.sigBytes-=s}return new N(t,s)}}class N{words;sigBytes;constructor(e,t){e=this.words=e||[],this.sigBytes=t===void 0?e.length*4:t}static fromUtf8(e){const t=unescape(encodeURIComponent(e)),i=t.length,o=[];for(let s=0;s<i;s++)o[s>>>2]|=(t.charCodeAt(s)&255)<<24-s%4*8;return new N(o,i)}toBase64(){const e=[];for(let t=0;t<this.sigBytes;t+=3){const i=this.words[t>>>2]>>>24-t%4*8&255,o=this.words[t+1>>>2]>>>24-(t+1)%4*8&255,s=this.words[t+2>>>2]>>>24-(t+2)%4*8&255,r=i<<16|o<<8|s;for(let a=0;a<4&&t*8+a*6<this.sigBytes*8;a++)e.push(tt.charAt(r>>>6*(3-a)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let t=0;t<e.sigBytes;t++){const i=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=i<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<e.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=e.words[t>>>2];this.sigBytes+=e.sigBytes}}function nt(n){return new it().finalize(n).toBase64()}function st(n){return nt(Ve(n))}const ot={key:0},rt={key:0},at={id:"__preview_loader"},lt={__name:"ContentPreviewMode",props:{previewToken:{type:String,required:!0},api:{type:String,required:!0},initializePreview:{type:Function,required:!0}},setup(n){const e=n,t=["__nuxt_preview","__preview_enabled"],i=z(),o=me(),s=L(!0),r=L(!1),a=L(!1),l=L("");let p;const c=async()=>{re("previewToken").value="",window.sessionStorage.removeItem("previewToken"),window.sessionStorage.removeItem("previewAPI"),await o.replace({query:{preview:void 0}}),window.location.reload()},y=async u=>{await e.initializePreview(u),re("previewToken").value&&(a.value=!0,await o.replace({query:{}}),i.callHook("nuxt-content:preview:ready"),window.parent&&window.self!==window.parent&&p.disconnect())};return Be(async()=>{p=(await He(()=>import("./j843apyr.js"),[],import.meta.url)).connect(`${e.api}/preview`,{transports:["websocket","polling"],auth:{token:e.previewToken}});let d;p.on("connect",()=>{d=setTimeout(()=>{a.value||(d=setTimeout(()=>{l.value="Preview sync timed out",a.value=!1},3e4),p.emit("draft:requestSync"))},3e4)});const g=()=>{d&&(clearTimeout(d),d=null)};p.on("draft:sync",async h=>{if(g(),!h){try{p.once("draft:ready",()=>{p.emit("draft:requestSync")}),await $fetch("api/projects/preview/sync",{baseURL:e.api,method:"POST",params:{token:e.previewToken}})}catch(f){switch(g(),f.response.status){case 404:l.value="Preview draft not found",a.value=!1;break;default:l.value="An error occurred while syncing preview",a.value=!1}}return}y(h)}),p.on("draft:unauthorized",()=>{g(),l.value="Unauthorized preview",a.value=!1}),p.on("disconnect",()=>{g()}),document.body.classList.add(...t)}),Ue(()=>{document.body.classList.remove(...t)}),(u,d)=>($(),O("div",null,[s.value?($(),O("div",{key:0,id:"__nuxt_preview",class:ze({__preview_ready:a.value,__preview_refreshing:r.value})},[a.value?($(),O(Fe,{key:0},[d[0]||(d[0]=E("svg",{viewBox:"0 0 90 90",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[E("path",{d:"M50.0016 71.0999h29.2561c.9293.0001 1.8422-.241 2.6469-.6992.8047-.4582 1.4729-1.1173 1.9373-1.9109.4645-.7936.7088-1.6939.7083-2.6102-.0004-.9162-.2455-1.8163-.7106-2.6095L64.192 29.713c-.4644-.7934-1.1325-1.4523-1.937-1.9105-.8046-.4581-1.7173-.6993-2.6463-.6993-.9291 0-1.8418.2412-2.6463.6993-.8046.4582-1.4726 1.1171-1.937 1.9105l-5.0238 8.5861-9.8224-16.7898c-.4648-.7934-1.1332-1.4522-1.938-1.9102-.8047-.4581-1.7176-.6992-2.6468-.6992-.9292 0-1.842.2411-2.6468.6992-.8048.458-1.4731 1.1168-1.9379 1.9102L6.56062 63.2701c-.46512.7932-.71021 1.6933-.71061 2.6095-.00041.9163.24389 1.8166.70831 2.6102.46443.7936 1.1326 1.4527 1.93732 1.9109.80473.4582 1.71766.6993 2.64686.6992h18.3646c7.2763 0 12.6422-3.1516 16.3345-9.3002l8.9642-15.3081 4.8015-8.1925 14.4099 24.6083H54.8058l-4.8042 8.1925ZM29.2077 62.899l-12.8161-.0028L35.603 30.0869l9.5857 16.4047-6.418 10.9645c-2.4521 3.9894-5.2377 5.4429-9.563 5.4429Z",fill:"currentColor"})],-1)),d[1]||(d[1]=E("span",null,"Preview enabled",-1)),E("button",{onClick:c}," Close ")],64)):V("",!0)],2)):V("",!0),ne(oe,{name:"preview-loading"},{default:se(()=>[s.value&&!a.value&&!l.value?($(),O("div",ot,[d[4]||(d[4]=E("div",{id:"__preview_background"},null,-1)),E("div",{id:"__preview_loader"},[d[2]||(d[2]=E("svg",{id:"__preview_loading_icon",width:"32",height:"32",viewBox:"0 0 24 24"},[E("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 0 0 4.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 0 1-15.357-2m15.357 2H15"})],-1)),d[3]||(d[3]=E("p",null,"Initializing the preview...",-1)),E("button",{onClick:c}," Cancel ")])])):V("",!0)]),_:1}),ne(oe,{name:"preview-loading"},{default:se(()=>[l.value?($(),O("div",rt,[d[5]||(d[5]=E("div",{id:"__preview_background"},null,-1)),E("div",at,[E("p",null,Xe(l.value),1),E("button",{onClick:c}," Exit preview ")])])):V("",!0)]),_:1})]))}},pt=We(lt,[["__scopeId","data-v-80a3334c"]]),ct=/^[A-Za-z]:\//;function F(n=""){return n&&n.replace(/\\/g,"/").replace(ct,e=>e.toUpperCase())}const dt=/^[/\\]{2}/,ut=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,xe=/^[A-Za-z]:$/,ht=/.(\.[^./]+|\.)$/,gt=/^[/\\]|^[a-zA-Z]:[/\\]/,yt=function(n){if(n.length===0)return".";n=F(n);const e=n.match(dt),t=Q(n),i=n[n.length-1]==="/";return n=ft(n,!t),n.length===0?t?"/":i?"./":".":(i&&(n+="/"),xe.test(n)&&(n+="/"),e?t?`//${n}`:`//./${n}`:t&&!Q(n)?`/${n}`:n)},Te=function(...n){let e="";for(const t of n)if(t)if(e.length>0){const i=e[e.length-1]==="/",o=t[0]==="/";i&&o?e+=t.slice(1):e+=i||o?t:`/${t}`}else e+=t;return yt(e)};function ft(n,e){let t="",i=0,o=-1,s=0,r=null;for(let a=0;a<=n.length;++a){if(a<n.length)r=n[a];else{if(r==="/")break;r="/"}if(r==="/"){if(!(o===a-1||s===1))if(s===2){if(t.length<2||i!==2||t[t.length-1]!=="."||t[t.length-2]!=="."){if(t.length>2){const l=t.lastIndexOf("/");l===-1?(t="",i=0):(t=t.slice(0,l),i=t.length-1-t.lastIndexOf("/")),o=a,s=0;continue}else if(t.length>0){t="",i=0,o=a,s=0;continue}}e&&(t+=t.length>0?"/..":"..",i=2)}else t.length>0?t+=`/${n.slice(o+1,a)}`:t=n.slice(o+1,a),i=a-o-1;o=a,s=0}else r==="."&&s!==-1?++s:s=-1}return t}const Q=function(n){return ut.test(n)},mt=function(n){if(n==="..")return"";const e=ht.exec(F(n));return e&&e[1]||""},Ae=function(n){const e=F(n).replace(/\/$/,"").split("/").slice(0,-1);return e.length===1&&xe.test(e[0])&&(e[0]+="/"),e.join("/")||(Q(n)?"/":".")},bt=function(n,e){const t=F(n).split("/");let i="";for(let o=t.length-1;o>=0;o--){const s=t[o];if(s){i=s;break}}return e&&i.endsWith(e)?i.slice(0,-e.length):i},wt=function(n){const e=gt.exec(n)?.[0]?.replace(/\\/g,"/")||"",t=bt(n),i=mt(t);return{root:e,dir:Ae(n),base:t,ext:i,name:t.slice(0,t.length-i.length)}},j={appConfig:"app.config.ts",appConfigV4:"app/app.config.ts",nuxtConfig:"nuxt.config.ts"};function H(n){return n?.startsWith("content/")?n.split("/").slice(1).join("/"):ee(n)}function P(n,e=!1){return n&&(e?be(n.replace(/\/\d+\./,"/")):ee(n.replace(/^\d+\./,"")))}function K(n){const e=H(n);return Te(Ae(e),wt(e).name)}function vt(n=[],e,t){const i=[...e||[]],o=[...t||[]],s=JSON.parse(JSON.stringify(n));for(const a of i)if(a.new)s.push({path:a.path,parsed:a.parsed});else if(a.oldPath)if(o.splice(o.findIndex(p=>p.path===a.oldPath),1),i.find(p=>p.path===a.oldPath))s.push({path:a.path,parsed:a.parsed});else{const p=s.find(c=>c.path===a.oldPath);p&&(p.path=a.path,a.parsed?p.parsed=a.parsed:a.pathMeta&&["_file","_path","_id","_locale"].forEach(c=>{p.parsed[c]=a.pathMeta[c]}))}else{const l=s.find(p=>p.path===a.path);l?Object.assign(l,{path:a.path,parsed:a.parsed}):s.push({path:a.path,parsed:a.parsed})}for(const a of o)s.splice(s.findIndex(l=>l.path===a.path),1);const r=new Intl.Collator(void 0,{numeric:!0});return s.sort((a,l)=>r.compare(a.path,l.path)),s}const xt=Ke((n,e,t)=>{if(Array.isArray(n[e])&&Array.isArray(t))return n[e]=t,!0}),Tt=n=>{let e;return t=>(e||(e=n()),e)};function Ee(n,e){for(const t in n){const i=e[t];t in e||delete n[t],i!==null&&typeof i=="object"&&Ee(n[t],e[t])}}function _e(n,e){for(const t in e){const i=e[t];if(i==="_DELETED_"){delete n[t];continue}i!==null&&typeof i=="object"?Array.isArray(i)&&Array.isArray(n[t])?n[t]=i:(n[t]=n[t]||{},_e(n[t],i)):n[t]=i}}function Re(n){const[e,...t]=n.include.includes("*")?n.include.split("*"):["",n.include];return{fixed:e||"",dynamic:"*"+t.join("*")}}const Ce=(n,e,t)=>{const{fixed:i}=Re(t);if(!n.parsed)return;const o=P(i||""),s=P(t?.prefix||"",!0),r=n.parsed._path.substring(o.length),a=Te(s,r),l={id:n.parsed._id,stem:n.parsed._stem,meta:{},extension:n.parsed._extension,path:a},p=e.schema.definitions[e.name].properties;return Object.keys(n.parsed).forEach(c=>{c in p?l[c]=n.parsed[c]:l.meta[c]=n.parsed[c]}),l},je=(n,e,t)=>{const i=n instanceof RegExp?le(n,t):n,o=e instanceof RegExp?le(e,t):e,s=i!==null&&o!=null&&At(i,o,t);return s&&{start:s[0],end:s[1],pre:t.slice(0,s[0]),body:t.slice(s[0]+i.length,s[1]),post:t.slice(s[1]+o.length)}},le=(n,e)=>{const t=e.match(n);return t?t[0]:null},At=(n,e,t)=>{let i,o,s,r,a,l=t.indexOf(n),p=t.indexOf(e,l+1),c=l;if(l>=0&&p>0){if(n===e)return[l,p];for(i=[],s=t.length;c>=0&&!a;){if(c===l)i.push(c),l=t.indexOf(n,c+1);else if(i.length===1){const y=i.pop();y!==void 0&&(a=[y,p])}else o=i.pop(),o!==void 0&&o<s&&(s=o,r=p),p=t.indexOf(e,c+1);c=l<p&&l>=0?l:p}i.length&&r!==void 0&&(a=[s,r])}return a},Pe="\0SLASH"+Math.random()+"\0",ke="\0OPEN"+Math.random()+"\0",te="\0CLOSE"+Math.random()+"\0",Se="\0COMMA"+Math.random()+"\0",Ne="\0PERIOD"+Math.random()+"\0",Et=new RegExp(Pe,"g"),_t=new RegExp(ke,"g"),Rt=new RegExp(te,"g"),Ct=new RegExp(Se,"g"),jt=new RegExp(Ne,"g"),Pt=/\\\\/g,kt=/\\{/g,St=/\\}/g,Nt=/\\,/g,Dt=/\\./g;function G(n){return isNaN(n)?n.charCodeAt(0):parseInt(n,10)}function Ot(n){return n.replace(Pt,Pe).replace(kt,ke).replace(St,te).replace(Nt,Se).replace(Dt,Ne)}function $t(n){return n.replace(Et,"\\").replace(_t,"{").replace(Rt,"}").replace(Ct,",").replace(jt,".")}function De(n){if(!n)return[""];const e=[],t=je("{","}",n);if(!t)return n.split(",");const{pre:i,body:o,post:s}=t,r=i.split(",");r[r.length-1]+="{"+o+"}";const a=De(s);return s.length&&(r[r.length-1]+=a.shift(),r.push.apply(r,a)),e.push.apply(e,r),e}function qt(n){return n?(n.slice(0,2)==="{}"&&(n="\\{\\}"+n.slice(2)),M(Ot(n),!0).map($t)):[]}function Lt(n){return"{"+n+"}"}function Mt(n){return/^-?0\d/.test(n)}function It(n,e){return n<=e}function Vt(n,e){return n>=e}function M(n,e){const t=[],i=je("{","}",n);if(!i)return[n];const o=i.pre,s=i.post.length?M(i.post,!1):[""];if(/\$$/.test(i.pre))for(let r=0;r<s.length;r++){const a=o+"{"+i.body+"}"+s[r];t.push(a)}else{const r=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),l=r||a,p=i.body.indexOf(",")>=0;if(!l&&!p)return i.post.match(/,(?!,).*\}/)?(n=i.pre+"{"+i.body+te+i.post,M(n)):[n];let c;if(l)c=i.body.split(/\.\./);else if(c=De(i.body),c.length===1&&c[0]!==void 0&&(c=M(c[0],!1).map(Lt),c.length===1))return s.map(u=>i.pre+c[0]+u);let y;if(l&&c[0]!==void 0&&c[1]!==void 0){const u=G(c[0]),d=G(c[1]),g=Math.max(c[0].length,c[1].length);let h=c.length===3&&c[2]!==void 0?Math.abs(G(c[2])):1,f=It;d<u&&(h*=-1,f=Vt);const x=c.some(Mt);y=[];for(let m=u;f(m,d);m+=h){let v;if(a)v=String.fromCharCode(m),v==="\\"&&(v="");else if(v=String(m),x){const T=g-v.length;if(T>0){const C=new Array(T+1).join("0");m<0?v="-"+C+v.slice(1):v=C+v}}y.push(v)}}else{y=[];for(let u=0;u<c.length;u++)y.push.apply(y,M(c[u],!1))}for(let u=0;u<y.length;u++)for(let d=0;d<s.length;d++){const g=o+y[u]+s[d];(!e||l||g)&&t.push(g)}}return t}const Wt=1024*64,U=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>Wt)throw new TypeError("pattern is too long")},Bt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},q=n=>n.replace(/[[\]\\-]/g,"\\$&"),Ht=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),pe=n=>n.join(""),Ut=(n,e)=>{const t=e;if(n.charAt(t)!=="[")throw new Error("not in a brace expression");const i=[],o=[];let s=t+1,r=!1,a=!1,l=!1,p=!1,c=t,y="";e:for(;s<n.length;){const h=n.charAt(s);if((h==="!"||h==="^")&&s===t+1){p=!0,s++;continue}if(h==="]"&&r&&!l){c=s+1;break}if(r=!0,h==="\\"&&!l){l=!0,s++;continue}if(h==="["&&!l){for(const[f,[b,x,m]]of Object.entries(Bt))if(n.startsWith(f,s)){if(y)return["$.",!1,n.length-t,!0];s+=f.length,m?o.push(b):i.push(b),a=a||x;continue e}}if(l=!1,y){h>y?i.push(q(y)+"-"+q(h)):h===y&&i.push(q(h)),y="",s++;continue}if(n.startsWith("-]",s+1)){i.push(q(h+"-")),s+=2;continue}if(n.startsWith("-",s+1)){y=h,s+=2;continue}i.push(q(h)),s++}if(c<s)return["",!1,0,!1];if(!i.length&&!o.length)return["$.",!1,n.length-t,!0];if(o.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!p){const h=i[0].length===2?i[0].slice(-1):i[0];return[Ht(h),!1,c-t,!1]}const u="["+(p?"^":"")+pe(i)+"]",d="["+(p?"":"^")+pe(o)+"]";return[i.length&&o.length?"("+u+"|"+d+")":i.length?u:d,a,c-t,!0]},I=(n,{windowsPathsNoEscape:e=!1}={})=>e?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),zt=new Set(["!","?","+","*","@"]),ce=n=>zt.has(n),Ft="(?!(?:^|/)\\.\\.?(?:$|/))",W="(?!\\.)",Xt=new Set(["[","."]),Kt=new Set(["..","."]),Gt=new Set("().*{}+?[]^$\\!"),Yt=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ie="[^/]",de=ie+"*?",ue=ie+"+?";class A{type;#i;#n;#o=!1;#e=[];#t;#r;#l;#a=!1;#s;#p;#d=!1;constructor(e,t,i={}){this.type=e,e&&(this.#n=!0),this.#t=t,this.#i=this.#t?this.#t.#i:this,this.#s=this.#i===this?i:this.#i.#s,this.#l=this.#i===this?[]:this.#i.#l,e==="!"&&!this.#i.#a&&this.#l.push(this),this.#r=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#n!==void 0)return this.#n;for(const e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#n=!0;return this.#n}toString(){return this.#p!==void 0?this.#p:this.type?this.#p=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#p=this.#e.map(e=>String(e)).join("")}#h(){if(this!==this.#i)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let t=e,i=t.#t;for(;i;){for(let o=t.#r+1;!i.type&&o<i.#e.length;o++)for(const s of e.#e){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(i.#e[o])}t=i,i=t.#t}}return this}push(...e){for(const t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof A&&t.#t===this))throw new Error("invalid part: "+t);this.#e.push(t)}}toJSON(){const e=this.type===null?this.#e.slice().map(t=>typeof t=="string"?t:t.toJSON()):[this.type,...this.#e.map(t=>t.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#i||this.#i.#a&&this.#t?.type==="!")&&e.push({}),e}isStart(){if(this.#i===this)return!0;if(!this.#t?.isStart())return!1;if(this.#r===0)return!0;const e=this.#t;for(let t=0;t<this.#r;t++){const i=e.#e[t];if(!(i instanceof A&&i.type==="!"))return!1}return!0}isEnd(){if(this.#i===this||this.#t?.type==="!")return!0;if(!this.#t?.isEnd())return!1;if(!this.type)return this.#t?.isEnd();const e=this.#t?this.#t.#e.length:0;return this.#r===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){const t=new A(this.type,e);for(const i of this.#e)t.copyIn(i);return t}static#c(e,t,i,o){let s=!1,r=!1,a=-1,l=!1;if(t.type===null){let d=i,g="";for(;d<e.length;){const h=e.charAt(d++);if(s||h==="\\"){s=!s,g+=h;continue}if(r){d===a+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(d===a+2&&l)&&(r=!1),g+=h;continue}else if(h==="["){r=!0,a=d,l=!1,g+=h;continue}if(!o.noext&&ce(h)&&e.charAt(d)==="("){t.push(g),g="";const f=new A(h,t);d=A.#c(e,f,d,o),t.push(f);continue}g+=h}return t.push(g),d}let p=i+1,c=new A(null,t);const y=[];let u="";for(;p<e.length;){const d=e.charAt(p++);if(s||d==="\\"){s=!s,u+=d;continue}if(r){p===a+1?(d==="^"||d==="!")&&(l=!0):d==="]"&&!(p===a+2&&l)&&(r=!1),u+=d;continue}else if(d==="["){r=!0,a=p,l=!1,u+=d;continue}if(ce(d)&&e.charAt(p)==="("){c.push(u),u="";const g=new A(d,c);c.push(g),p=A.#c(e,g,p,o);continue}if(d==="|"){c.push(u),u="",y.push(c),c=new A(null,t);continue}if(d===")")return u===""&&t.#e.length===0&&(t.#d=!0),c.push(u),u="",t.push(...y,c),p;u+=d}return t.type=null,t.#n=void 0,t.#e=[e.substring(i-1)],p}static fromGlob(e,t={}){const i=new A(null,void 0,t);return A.#c(e,i,0,t),i}toMMPattern(){if(this!==this.#i)return this.#i.toMMPattern();const e=this.toString(),[t,i,o,s]=this.toRegExpSource();if(!(o||this.#n||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return i;const a=(this.#s.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${t}$`,a),{_src:t,_glob:e})}get options(){return this.#s}toRegExpSource(e){const t=e??!!this.#s.dot;if(this.#i===this&&this.#h(),!this.type){const l=this.isStart()&&this.isEnd(),p=this.#e.map(d=>{const[g,h,f,b]=typeof d=="string"?A.#g(d,this.#n,l):d.toRegExpSource(e);return this.#n=this.#n||f,this.#o=this.#o||b,g}).join("");let c="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&Kt.has(this.#e[0]))){const g=Xt,h=t&&g.has(p.charAt(0))||p.startsWith("\\.")&&g.has(p.charAt(2))||p.startsWith("\\.\\.")&&g.has(p.charAt(4)),f=!t&&!e&&g.has(p.charAt(0));c=h?Ft:f?W:""}let y="";return this.isEnd()&&this.#i.#a&&this.#t?.type==="!"&&(y="(?:$|\\/)"),[c+p+y,I(p),this.#n=!!this.#n,this.#o]}const i=this.type==="*"||this.type==="+",o=this.type==="!"?"(?:(?!(?:":"(?:";let s=this.#u(t);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){const l=this.toString();return this.#e=[l],this.type=null,this.#n=void 0,[l,I(this.toString()),!1,!1]}let r=!i||e||t||!W?"":this.#u(!0);r===s&&(r=""),r&&(s=`(?:${s})(?:${r})*?`);let a="";if(this.type==="!"&&this.#d)a=(this.isStart()&&!t?W:"")+ue;else{const l=this.type==="!"?"))"+(this.isStart()&&!t&&!e?W:"")+de+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&r?")":this.type==="*"&&r?")?":`)${this.type}`;a=o+s+l}return[a,I(s),this.#n=!!this.#n,this.#o]}#u(e){return this.#e.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");const[i,o,s,r]=t.toRegExpSource(e);return this.#o=this.#o||r,i}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#g(e,t,i=!1){let o=!1,s="",r=!1;for(let a=0;a<e.length;a++){const l=e.charAt(a);if(o){o=!1,s+=(Gt.has(l)?"\\":"")+l;continue}if(l==="\\"){a===e.length-1?s+="\\\\":o=!0;continue}if(l==="["){const[p,c,y,u]=Ut(e,a);if(y){s+=p,r=r||c,a+=y-1,t=t||u;continue}}if(l==="*"){i&&e==="*"?s+=ue:s+=de,t=!0;continue}if(l==="?"){s+=ie,t=!0;continue}s+=Yt(l)}return[s,I(e),!!t,r]}}const Qt=(n,{windowsPathsNoEscape:e=!1}={})=>e?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&");var Y={};const w=(n,e,t={})=>(U(e),!t.nocomment&&e.charAt(0)==="#"?!1:new X(e,t).match(n)),Zt=/^\*+([^+@!?\*\[\(]*)$/,Jt=n=>e=>!e.startsWith(".")&&e.endsWith(n),ei=n=>e=>e.endsWith(n),ti=n=>(n=n.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(n)),ii=n=>(n=n.toLowerCase(),e=>e.toLowerCase().endsWith(n)),ni=/^\*+\.\*+$/,si=n=>!n.startsWith(".")&&n.includes("."),oi=n=>n!=="."&&n!==".."&&n.includes("."),ri=/^\.\*+$/,ai=n=>n!=="."&&n!==".."&&n.startsWith("."),li=/^\*+$/,pi=n=>n.length!==0&&!n.startsWith("."),ci=n=>n.length!==0&&n!=="."&&n!=="..",di=/^\?+([^+@!?\*\[\(]*)?$/,ui=([n,e=""])=>{const t=Oe([n]);return e?(e=e.toLowerCase(),i=>t(i)&&i.toLowerCase().endsWith(e)):t},hi=([n,e=""])=>{const t=$e([n]);return e?(e=e.toLowerCase(),i=>t(i)&&i.toLowerCase().endsWith(e)):t},gi=([n,e=""])=>{const t=$e([n]);return e?i=>t(i)&&i.endsWith(e):t},yi=([n,e=""])=>{const t=Oe([n]);return e?i=>t(i)&&i.endsWith(e):t},Oe=([n])=>{const e=n.length;return t=>t.length===e&&!t.startsWith(".")},$e=([n])=>{const e=n.length;return t=>t.length===e&&t!=="."&&t!==".."},qe=typeof process=="object"&&process?typeof Y=="object"&&Y&&Y.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",he={win32:{sep:"\\"},posix:{sep:"/"}},fi=qe==="win32"?he.win32.sep:he.posix.sep;w.sep=fi;const R=Symbol("globstar **");w.GLOBSTAR=R;const mi="[^/]",bi=mi+"*?",wi="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",vi="(?:(?!(?:\\/|^)\\.).)*?",xi=(n,e={})=>t=>w(t,n,e);w.filter=xi;const _=(n,e={})=>Object.assign({},n,e),Ti=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return w;const e=w;return Object.assign((i,o,s={})=>e(i,o,_(n,s)),{Minimatch:class extends e.Minimatch{constructor(o,s={}){super(o,_(n,s))}static defaults(o){return e.defaults(_(n,o)).Minimatch}},AST:class extends e.AST{constructor(o,s,r={}){super(o,s,_(n,r))}static fromGlob(o,s={}){return e.AST.fromGlob(o,_(n,s))}},unescape:(i,o={})=>e.unescape(i,_(n,o)),escape:(i,o={})=>e.escape(i,_(n,o)),filter:(i,o={})=>e.filter(i,_(n,o)),defaults:i=>e.defaults(_(n,i)),makeRe:(i,o={})=>e.makeRe(i,_(n,o)),braceExpand:(i,o={})=>e.braceExpand(i,_(n,o)),match:(i,o,s={})=>e.match(i,o,_(n,s)),sep:e.sep,GLOBSTAR:R})};w.defaults=Ti;const Le=(n,e={})=>(U(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:qt(n));w.braceExpand=Le;const Ai=(n,e={})=>new X(n,e).makeRe();w.makeRe=Ai;const Ei=(n,e,t={})=>{const i=new X(e,t);return n=n.filter(o=>i.match(o)),i.options.nonull&&!n.length&&n.push(e),n};w.match=Ei;const ge=/[?*]|[+@!]\(.*?\)|\[|\]/,_i=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class X{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){U(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||qe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const e of this.set)for(const t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){const e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);const i=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let o=this.globParts.map((s,r,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){const l=s[0]===""&&s[1]===""&&(s[2]==="?"||!ge.test(s[2]))&&!ge.test(s[3]),p=/^[a-z]:/i.test(s[0]);if(l)return[...s.slice(0,4),...s.slice(4).map(c=>this.parse(c))];if(p)return[s[0],...s.slice(1).map(c=>this.parse(c))]}return s.map(l=>this.parse(l))});if(this.debug(this.pattern,o),this.set=o.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){const r=this.set[s];r[0]===""&&r[1]===""&&this.globParts[s][2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3])&&(r[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let i=0;i<e.length;i++)for(let o=0;o<e[i].length;o++)e[i][o]==="**"&&(e[i][o]="*");const{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let i=-1;for(;(i=t.indexOf("**",i+1))!==-1;){let o=i;for(;t[o+1]==="**";)o++;o!==i&&t.splice(i,o-i)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((i,o)=>{const s=i[i.length-1];return o==="**"&&s==="**"?i:o===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(i.pop(),i):(i.push(o),i)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let o=1;o<e.length-1;o++){const s=e[o];o===1&&s===""&&e[0]===""||(s==="."||s==="")&&(t=!0,e.splice(o,1),o--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let i=0;for(;(i=e.indexOf("..",i+1))!==-1;){const o=e[i-1];o&&o!=="."&&o!==".."&&o!=="**"&&(t=!0,e.splice(i-1,2),i-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let i of e){let o=-1;for(;(o=i.indexOf("**",o+1))!==-1;){let r=o;for(;i[r+1]==="**";)r++;r>o&&i.splice(o+1,r-o);let a=i[o+1];const l=i[o+2],p=i[o+3];if(a!==".."||!l||l==="."||l===".."||!p||p==="."||p==="..")continue;t=!0,i.splice(o,1);const c=i.slice(0);c[o]="**",e.push(c),o--}if(!this.preserveMultipleSlashes){for(let r=1;r<i.length-1;r++){const a=i[r];r===1&&a===""&&i[0]===""||(a==="."||a==="")&&(t=!0,i.splice(r,1),r--)}i[0]==="."&&i.length===2&&(i[1]==="."||i[1]==="")&&(t=!0,i.pop())}let s=0;for(;(s=i.indexOf("..",s+1))!==-1;){const r=i[s-1];if(r&&r!=="."&&r!==".."&&r!=="**"){t=!0;const l=s===1&&i[s+1]==="**"?["."]:[];i.splice(s-1,2,...l),i.length===0&&i.push(""),s-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let i=t+1;i<e.length;i++){const o=this.partsMatch(e[t],e[i],!this.preserveMultipleSlashes);if(o){e[t]=[],e[i]=o;break}}return e.filter(t=>t.length)}partsMatch(e,t,i=!1){let o=0,s=0,r=[],a="";for(;o<e.length&&s<t.length;)if(e[o]===t[s])r.push(a==="b"?t[s]:e[o]),o++,s++;else if(i&&e[o]==="**"&&t[s]===e[o+1])r.push(e[o]),o++;else if(i&&t[s]==="**"&&e[o]===t[s+1])r.push(t[s]),s++;else if(e[o]==="*"&&t[s]&&(this.options.dot||!t[s].startsWith("."))&&t[s]!=="**"){if(a==="b")return!1;a="a",r.push(e[o]),o++,s++}else if(t[s]==="*"&&e[o]&&(this.options.dot||!e[o].startsWith("."))&&e[o]!=="**"){if(a==="a")return!1;a="b",r.push(t[s]),o++,s++}else return!1;return e.length===t.length&&r}parseNegate(){if(this.nonegate)return;const e=this.pattern;let t=!1,i=0;for(let o=0;o<e.length&&e.charAt(o)==="!";o++)t=!t,i++;i&&(this.pattern=e.slice(i)),this.negate=t}matchOne(e,t,i=!1){const o=this.options;if(this.isWindows){const h=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),f=!h&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),b=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),x=!b&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),m=f?3:h?0:void 0,v=x?3:b?0:void 0;if(typeof m=="number"&&typeof v=="number"){const[T,C]=[e[m],t[v]];T.toLowerCase()===C.toLowerCase()&&(t[v]=T,v>m?t=t.slice(v):m>v&&(e=e.slice(m)))}}const{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var r=0,a=0,l=e.length,p=t.length;r<l&&a<p;r++,a++){this.debug("matchOne loop");var c=t[a],y=e[r];if(this.debug(t,c,y),c===!1)return!1;if(c===R){this.debug("GLOBSTAR",[t,c,y]);var u=r,d=a+1;if(d===p){for(this.debug("** at the end");r<l;r++)if(e[r]==="."||e[r]===".."||!o.dot&&e[r].charAt(0)===".")return!1;return!0}for(;u<l;){var g=e[u];if(this.debug(`
globstar while`,e,u,t,d,g),this.matchOne(e.slice(u),t.slice(d),i))return this.debug("globstar found match!",u,l,g),!0;if(g==="."||g===".."||!o.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,u,t,d);break}this.debug("globstar swallow a segment, and continue"),u++}return!!(i&&(this.debug(`
>>> no match, partial?`,e,u,t,d),u===l))}let h;if(typeof c=="string"?(h=y===c,this.debug("string match",c,y,h)):(h=c.test(y),this.debug("pattern match",c,y,h)),!h)return!1}if(r===l&&a===p)return!0;if(r===l)return i;if(a===p)return r===l-1&&e[r]==="";throw new Error("wtf?")}braceExpand(){return Le(this.pattern,this.options)}parse(e){U(e);const t=this.options;if(e==="**")return R;if(e==="")return"";let i,o=null;(i=e.match(li))?o=t.dot?ci:pi:(i=e.match(Zt))?o=(t.nocase?t.dot?ii:ti:t.dot?ei:Jt)(i[1]):(i=e.match(di))?o=(t.nocase?t.dot?hi:ui:t.dot?gi:yi)(i):(i=e.match(ni))?o=t.dot?oi:si:(i=e.match(ri))&&(o=ai);const s=A.fromGlob(e,this.options).toMMPattern();return o&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:o}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const t=this.options,i=t.noglobstar?bi:t.dot?wi:vi,o=new Set(t.nocase?["i"]:[]);let s=e.map(l=>{const p=l.map(c=>{if(c instanceof RegExp)for(const y of c.flags.split(""))o.add(y);return typeof c=="string"?_i(c):c===R?R:c._src});return p.forEach((c,y)=>{const u=p[y+1],d=p[y-1];c!==R||d===R||(d===void 0?u!==void 0&&u!==R?p[y+1]="(?:\\/|"+i+"\\/)?"+u:p[y]=i:u===void 0?p[y-1]=d+"(?:\\/|"+i+")?":u!==R&&(p[y-1]=d+"(?:\\/|\\/"+i+"\\/)"+u,p[y+1]=R))}),p.filter(c=>c!==R).join("/")}).join("|");const[r,a]=e.length>1?["(?:",")"]:["",""];s="^"+r+s+a+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...o].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;const i=this.options;this.isWindows&&(e=e.split("\\").join("/"));const o=this.slashSplit(e);this.debug(this.pattern,"split",o);const s=this.set;this.debug(this.pattern,"set",s);let r=o[o.length-1];if(!r)for(let a=o.length-2;!r&&a>=0;a--)r=o[a];for(let a=0;a<s.length;a++){const l=s[a];let p=o;if(i.matchBase&&l.length===1&&(p=[r]),this.matchOne(p,l,t))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(e){return w.defaults(e).Minimatch}}w.AST=A;w.Minimatch=X;w.escape=Qt;w.unescape=I;function Ri(n){const e=Object.values(n.definitions)[0]?.properties||{},t=new Set([e.id?"id":void 0,e.title?"title":void 0,...Object.keys(e).sort()].filter(Boolean));return Array.from(t)}const B=(n,e)=>{let t;return{collection:Object.values(e).find(o=>{if(!o.source||o.source.length===0)return;const s=H(n);return(s==="/"?["index.yml","index.yaml","index.md","index.json"]:[s]).some(a=>(t=o.source.find(l=>{const p=w(a,l.include),c=l.exclude?.some(y=>w(a,y));return p&&!c}),t))}),matchedSource:t}},Ci=(n,e)=>{let t;return{collection:Object.values(e).find(o=>{if(!(!o.source||o.source.length===0))return t=o.source.find(s=>{if(!s.prefix)return;const r=P(s.prefix,!0);if(!n.startsWith(r))return;if(n==="/"){const g=["index.yml","index.yaml","index.md","index.json"];return(n==="/"?g:g.map(f=>ee(ae(r,f)))).some(f=>{const b=w(f,P(s.include)),x=s.exclude?.some(m=>w(f,P(m)));return b&&!x})}const{fixed:a}=Re(s),l=P(a||""),p=n.substring(r.length),c=ae(l,p),y=g=>g.replace(/\.[^/.]+$/,""),u=w(c,y(P(s.include))),d=s.exclude?.some(g=>w(c,y(P(g))));return u&&!d}),t}),matchedSource:t}};function Me(n,e){const t=Pi(n,e);let i=0;return`INSERT INTO ${n.tableName} VALUES (${"?, ".repeat(t.length).slice(0,-2)})`.replace(/\?/g,()=>t[i++])}function ji(n,e,t){const i=Ie(n,e),o=Me(n,t);return`${i}; ${o}`}function Ie(n,e){return`DELETE FROM ${n.tableName} WHERE stem = '${e}';`}function ye(n,e,t){return`SELECT * FROM ${n.tableName} WHERE ${e} = '${t}';`}function Pi(n,e){const t=[],i=n.schema.definitions[n.name].properties;return Ri(n.schema).forEach(s=>{const r=i[s],a=n.fields[s],l=r?.default!==void 0?r.default:"NULL",p=typeof e[s]<"u"?e[s]:l;a==="json"?t.push(`'${JSON.stringify(p).replace(/'/g,"''")}'`):a==="string"||["string","enum"].includes(r.type)?["data","datetime"].includes(r.format)?t.push(p!=="NULL"?`'${new Date(p).toISOString()}'`:l):t.push(`'${String(p).replace(/\n/g,"\\n").replace(/'/g,"''")}'`):a==="boolean"?t.push(p!=="NULL"?!!p:p):t.push(p)}),t.push(`'${st(t)}'`),t}const ki=["https://nuxt.studio","https://dev.nuxt.studio"],D={landing:{name:"landing",pascalName:"Landing",tableName:"_content_landing",source:[{_resolved:!0,prefix:"/",include:"index.md",cwd:"/home/runner/work/nuxt-content/nuxt-content/docs/content"},{_resolved:!0,prefix:"/",include:"blog.yml",cwd:"/home/runner/work/nuxt-content/nuxt-content/docs/content"},{_resolved:!0,prefix:"/",include:"changelog.yml",cwd:"/home/runner/work/nuxt-content/nuxt-content/docs/content"},{_resolved:!0,prefix:"/",include:"studio/index.md",cwd:"/home/runner/work/nuxt-content/nuxt-content/docs/content"},{_resolved:!0,prefix:"/",include:"templates.yml",cwd:"/home/runner/work/nuxt-content/nuxt-content/docs/content"}],type:"page",fields:{id:"string",title:"string",body:"json",description:"string",extension:"string",meta:"json",navigation:"json",path:"string",seo:"json",stem:"string"},schema:{$schema:"http://json-schema.org/draft-07/schema#",$ref:"#/definitions/__SCHEMA__",definitions:{landing:{type:"object",properties:{id:{type:"string"},stem:{type:"string"},extension:{type:"string",enum:["md","yaml","yml","json","csv","xml"]},meta:{type:"object",additionalProperties:{}},path:{type:"string"},title:{type:"string"},description:{type:"string"},seo:{allOf:[{type:"object",properties:{title:{type:"string"},description:{type:"string"}}},{type:"object",additionalProperties:{}}],default:{}},body:{type:"object",properties:{type:{type:"string"},children:{},toc:{}},required:["type"],additionalProperties:!1},navigation:{anyOf:[{type:"boolean"},{type:"object",properties:{title:{type:"string"},description:{type:"string"},icon:{type:"string",$content:{editor:{input:"icon"}}}},required:["title","description","icon"],additionalProperties:!1}],default:!0}},required:["id","stem","extension","meta","path","title","description","body"],additionalProperties:!1}}},tableDefinition:`CREATE TABLE IF NOT EXISTS _content_landing (id TEXT PRIMARY KEY, "title" VARCHAR, "body" TEXT, "description" VARCHAR, "extension" VARCHAR, "meta" TEXT, "navigation" TEXT DEFAULT true, "path" VARCHAR, "seo" TEXT DEFAULT '{}', "stem" VARCHAR, "__hash__" TEXT UNIQUE);`},docs:{name:"docs",pascalName:"Docs",tableName:"_content_docs",source:[{_resolved:!0,prefix:"/",cwd:"/home/runner/work/nuxt-content/nuxt-content/docs/content",include:"**",exclude:["index.md"]}],type:"page",fields:{id:"string",title:"string",body:"json",description:"string",extension:"string",layout:"string",links:"json",meta:"json",navigation:"json",path:"string",seo:"json",stem:"string"},schema:{$schema:"http://json-schema.org/draft-07/schema#",$ref:"#/definitions/__SCHEMA__",definitions:{docs:{type:"object",properties:{id:{type:"string"},stem:{type:"string"},extension:{type:"string",enum:["md","yaml","yml","json","csv","xml"]},meta:{type:"object",additionalProperties:{}},path:{type:"string"},title:{type:"string"},description:{type:"string"},seo:{allOf:[{type:"object",properties:{title:{type:"string"},description:{type:"string"}}},{type:"object",additionalProperties:{}}],default:{}},body:{type:"object",properties:{type:{type:"string"},children:{},toc:{}},required:["type"],additionalProperties:!1},navigation:{anyOf:[{type:"boolean"},{type:"object",properties:{title:{type:"string"},description:{type:"string"},icon:{type:"string",$content:{editor:{input:"icon"}}}},required:["title","description","icon"],additionalProperties:!1}],default:!0},layout:{type:"string"},links:{type:"array",items:{type:"object",properties:{label:{type:"string"},icon:{type:"string"},to:{type:"string"},target:{type:"string"}},required:["label","icon","to"],additionalProperties:!1}}},required:["id","stem","extension","meta","path","title","description","body"],additionalProperties:!1}}},tableDefinition:`CREATE TABLE IF NOT EXISTS _content_docs (id TEXT PRIMARY KEY, "title" VARCHAR, "body" TEXT, "description" VARCHAR, "extension" VARCHAR, "layout" VARCHAR NULL, "links" TEXT NULL, "meta" TEXT, "navigation" TEXT DEFAULT true, "path" VARCHAR, "seo" TEXT DEFAULT '{}', "stem" VARCHAR, "__hash__" TEXT UNIQUE);`},pricing:{name:"pricing",pascalName:"Pricing",tableName:"_content_pricing",source:[{_resolved:!0,prefix:"/",include:"studio/pricing.yml",cwd:"/home/runner/work/nuxt-content/nuxt-content/docs/content"}],type:"page",fields:{id:"string",title:"string",body:"json",description:"string",extension:"string",features:"json",meta:"json",navigation:"json",onboarding:"json",path:"string",plans:"json",seo:"json",stem:"string"},schema:{$schema:"http://json-schema.org/draft-07/schema#",$ref:"#/definitions/__SCHEMA__",definitions:{pricing:{type:"object",properties:{id:{type:"string"},stem:{type:"string"},extension:{type:"string",enum:["md","yaml","yml","json","csv","xml"]},meta:{type:"object",additionalProperties:{}},path:{type:"string"},title:{type:"string"},description:{type:"string"},seo:{allOf:[{type:"object",properties:{title:{type:"string"},description:{type:"string"}}},{type:"object",additionalProperties:{}}],default:{}},body:{type:"object",properties:{type:{type:"string"},children:{},toc:{}},required:["type"],additionalProperties:!1},navigation:{anyOf:[{type:"boolean"},{type:"object",properties:{title:{type:"string"},description:{type:"string"},icon:{type:"string",$content:{editor:{input:"icon"}}}},required:["title","description","icon"],additionalProperties:!1}],default:!0},onboarding:{type:"object",properties:{title:{type:"string"},image:{type:"object",properties:{dark:{$content:{editor:{input:"media"}},type:"string"},light:{$content:{editor:{input:"media"}},type:"string"}},required:["dark","light"],additionalProperties:!1}},required:["title","image"],additionalProperties:!1},plans:{type:"object",properties:{solo:{type:"object",properties:{as:{description:"The element or component this component should render as.",default:"div"},title:{type:"string"},description:{type:"string"},badge:{description:`Display a badge next to the title.
Can be a string or an object.
\`{ color: 'primary', variant: 'subtle' }\`{lang="ts-type"}`,type:"string"},billingCycle:{description:`The unit price period that appears next to the price.
Typically used to show the recurring interval.`,type:"string"},billingPeriod:{description:`Additional billing context that appears above the billing cycle.
Typically used to show the actual billing frequency.`,type:"string"},price:{description:"The current price of the plan.\nWhen used with `discount`, this becomes the original price.",type:"string"},discount:{description:"The discounted price of the plan.\nWhen provided, the `price` prop will be displayed as strikethrough.",type:"string"},features:{description:`Display a list of features under the price.
Can be an array of strings or an array of objects.`,type:"array",items:{type:"string"}},button:{description:"Display a buy button at the bottom.\n`{ size: 'lg', block: true }`{lang=\"ts-type\"}\nUse the `onClick` field to add a click handler.",type:"object",properties:{label:{type:"string"},color:{enum:["primary","secondary","success","info","warning","error","neutral"],type:"string"},activeColor:{type:"string",enum:["primary","secondary","success","info","warning","error","neutral"]},variant:{enum:["soft","solid","outline","subtle","link","ghost"],type:"string"},activeVariant:{type:"string",enum:["soft","solid","outline","subtle","link","ghost"]},size:{enum:["xs","sm","md","lg","xl"],type:"string"},square:{type:"boolean",description:"Render the button with equal padding on all sides."},block:{type:"boolean",description:"Render the button full width."},loadingAuto:{type:"boolean",description:"Set loading state automatically based on the `@click` promise state"},class:{},ui:{type:"object"},icon:{type:"string",description:"Display an icon based on the `leading` and `trailing` props."},avatar:{type:"object",properties:{as:{description:"The element or component this component should render as."},src:{type:"string"},alt:{type:"string"},icon:{type:"string"},text:{type:"string"},size:{enum:["3xs","2xs","xs","sm","md","lg","xl","2xl","3xl"],type:"string"},chip:{enum:[!1,!0],type:["boolean","ChipProps"]},class:{},style:{},ui:{type:"object"}},additionalProperties:!1,description:"Display an avatar on the left side."},leading:{type:"boolean",description:"When `true`, the icon will be displayed on the left side."},leadingIcon:{type:"string",description:"Display an icon on the left side."},trailing:{type:"boolean",description:"When `true`, the icon will be displayed on the right side."},trailingIcon:{type:"string",description:"Display an icon on the right side."},loading:{type:"boolean",description:"When `true`, the loading icon will be displayed."},loadingIcon:{type:"string",description:"The icon when the `loading` prop is `true`."},as:{description:"The element or component this component should render as when not a link."},replace:{type:"boolean",description:"Calls `router.replace` instead of `router.push`."},type:{enum:["button","submit","reset"],type:"string",description:"The type of the button when not a link."},to:{type:"string",description:"Route Location the link should navigate to when clicked on."},activeClass:{type:"string",description:"Class to apply when the link is active"},exactActiveClass:{type:"string",description:"Class to apply when the link is exact active"},ariaCurrentValue:{enum:["page","step","location","date","time","true","false"],type:"string",description:"Value passed to the attribute `aria-current` when the link is exact active."},viewTransition:{type:"boolean",description:"Pass the returned promise of `router.push()` to `document.startViewTransition()` if supported."},disabled:{type:"boolean"},active:{type:"boolean",description:"Force the link to be active independent of the current route."},exact:{type:"boolean",description:"Will only be active if the current route is an exact match."},exactQuery:{enum:[!1,!0,"partial"],type:["boolean","string"],description:"Allows controlling how the current route query sets the link as active."},exactHash:{type:"boolean",description:"Will only be active if the current route hash is an exact match."},inactiveClass:{type:"string",description:"The class to apply when the link is inactive."},href:{description:"An alias for `to`. If used with `to`, `href` will be ignored"},external:{type:"boolean",description:"Forces the link to be considered as external (true) or internal (false). This is helpful to handle edge-cases"},target:{anyOf:[{enum:["_blank","_parent","_self","_top"]},{allOf:[{type:"string"},{type:"object",additionalProperties:!1}]}],description:"Where to display the linked URL, as the name for a browsing context."},rel:{enum:["noopener","noreferrer","nofollow","sponsored","ugc"],type:"string",description:'A rel attribute value to apply on the link. Defaults to "noopener noreferrer" for external links.'},noRel:{type:"boolean",description:"If set to true, no rel attribute will be added to the link"},prefetchedClass:{type:"string",description:"A class to apply to links that have been prefetched."},prefetch:{type:"boolean",description:"When enabled will prefetch middleware, layouts and payloads of links in the viewport."},prefetchOn:{enum:["visibility","interaction"],type:"string",description:"Allows controlling when to prefetch links. By default, prefetch is triggered only on visibility."},noPrefetch:{type:"boolean",description:"Escape hatch to disable `prefetch` attribute."}},additionalProperties:!1},tagline:{description:"Display a tagline highlighting the pricing value proposition.",type:"string"},terms:{description:"Display terms at the bottom.",type:"string"},orientation:{description:"The orientation of the pricing plan.",enum:["horizontal","vertical"],type:"string",default:"vertical"},variant:{enum:["soft","solid","outline","subtle"],type:"string",default:"outline"},ui:{type:"object"},highlight:{description:"Display a ring around the pricing plan to highlight it.",type:"boolean"},scale:{description:"Enlarge the plan to make it more prominent.",type:"boolean"}}},team:{type:"object",properties:{as:{description:"The element or component this component should render as.",default:"div"},title:{type:"string"},description:{type:"string"},badge:{description:`Display a badge next to the title.
Can be a string or an object.
\`{ color: 'primary', variant: 'subtle' }\`{lang="ts-type"}`,type:"string"},billingCycle:{description:`The unit price period that appears next to the price.
Typically used to show the recurring interval.`,type:"string"},billingPeriod:{description:`Additional billing context that appears above the billing cycle.
Typically used to show the actual billing frequency.`,type:"string"},price:{description:"The current price of the plan.\nWhen used with `discount`, this becomes the original price.",type:"string"},discount:{description:"The discounted price of the plan.\nWhen provided, the `price` prop will be displayed as strikethrough.",type:"string"},features:{description:`Display a list of features under the price.
Can be an array of strings or an array of objects.`,type:"array",items:{type:"string"}},button:{description:"Display a buy button at the bottom.\n`{ size: 'lg', block: true }`{lang=\"ts-type\"}\nUse the `onClick` field to add a click handler.",type:"object",properties:{label:{type:"string"},color:{enum:["primary","secondary","success","info","warning","error","neutral"],type:"string"},activeColor:{type:"string",enum:["primary","secondary","success","info","warning","error","neutral"]},variant:{enum:["soft","solid","outline","subtle","link","ghost"],type:"string"},activeVariant:{type:"string",enum:["soft","solid","outline","subtle","link","ghost"]},size:{enum:["xs","sm","md","lg","xl"],type:"string"},square:{type:"boolean",description:"Render the button with equal padding on all sides."},block:{type:"boolean",description:"Render the button full width."},loadingAuto:{type:"boolean",description:"Set loading state automatically based on the `@click` promise state"},class:{},ui:{type:"object"},icon:{type:"string",description:"Display an icon based on the `leading` and `trailing` props."},avatar:{type:"object",properties:{as:{description:"The element or component this component should render as."},src:{type:"string"},alt:{type:"string"},icon:{type:"string"},text:{type:"string"},size:{enum:["3xs","2xs","xs","sm","md","lg","xl","2xl","3xl"],type:"string"},chip:{enum:[!1,!0],type:["boolean","ChipProps"]},class:{},style:{},ui:{type:"object"}},additionalProperties:!1,description:"Display an avatar on the left side."},leading:{type:"boolean",description:"When `true`, the icon will be displayed on the left side."},leadingIcon:{type:"string",description:"Display an icon on the left side."},trailing:{type:"boolean",description:"When `true`, the icon will be displayed on the right side."},trailingIcon:{type:"string",description:"Display an icon on the right side."},loading:{type:"boolean",description:"When `true`, the loading icon will be displayed."},loadingIcon:{type:"string",description:"The icon when the `loading` prop is `true`."},as:{description:"The element or component this component should render as when not a link."},replace:{type:"boolean",description:"Calls `router.replace` instead of `router.push`."},type:{enum:["button","submit","reset"],type:"string",description:"The type of the button when not a link."},to:{type:"string",description:"Route Location the link should navigate to when clicked on."},activeClass:{type:"string",description:"Class to apply when the link is active"},exactActiveClass:{type:"string",description:"Class to apply when the link is exact active"},ariaCurrentValue:{enum:["page","step","location","date","time","true","false"],type:"string",description:"Value passed to the attribute `aria-current` when the link is exact active."},viewTransition:{type:"boolean",description:"Pass the returned promise of `router.push()` to `document.startViewTransition()` if supported."},disabled:{type:"boolean"},active:{type:"boolean",description:"Force the link to be active independent of the current route."},exact:{type:"boolean",description:"Will only be active if the current route is an exact match."},exactQuery:{enum:[!1,!0,"partial"],type:["boolean","string"],description:"Allows controlling how the current route query sets the link as active."},exactHash:{type:"boolean",description:"Will only be active if the current route hash is an exact match."},inactiveClass:{type:"string",description:"The class to apply when the link is inactive."},href:{description:"An alias for `to`. If used with `to`, `href` will be ignored"},external:{type:"boolean",description:"Forces the link to be considered as external (true) or internal (false). This is helpful to handle edge-cases"},target:{anyOf:[{enum:["_blank","_parent","_self","_top"]},{allOf:[{type:"string"},{type:"object",additionalProperties:!1}]}],description:"Where to display the linked URL, as the name for a browsing context."},rel:{enum:["noopener","noreferrer","nofollow","sponsored","ugc"],type:"string",description:'A rel attribute value to apply on the link. Defaults to "noopener noreferrer" for external links.'},noRel:{type:"boolean",description:"If set to true, no rel attribute will be added to the link"},prefetchedClass:{type:"string",description:"A class to apply to links that have been prefetched."},prefetch:{type:"boolean",description:"When enabled will prefetch middleware, layouts and payloads of links in the viewport."},prefetchOn:{enum:["visibility","interaction"],type:"string",description:"Allows controlling when to prefetch links. By default, prefetch is triggered only on visibility."},noPrefetch:{type:"boolean",description:"Escape hatch to disable `prefetch` attribute."}},additionalProperties:!1},tagline:{description:"Display a tagline highlighting the pricing value proposition.",type:"string"},terms:{description:"Display terms at the bottom.",type:"string"},orientation:{description:"The orientation of the pricing plan.",enum:["horizontal","vertical"],type:"string",default:"vertical"},variant:{enum:["soft","solid","outline","subtle"],type:"string",default:"outline"},ui:{type:"object"},highlight:{description:"Display a ring around the pricing plan to highlight it.",type:"boolean"},scale:{description:"Enlarge the plan to make it more prominent.",type:"boolean"}}},unlimited:{type:"object",properties:{as:{description:"The element or component this component should render as.",default:"div"},title:{type:"string"},description:{type:"string"},badge:{description:`Display a badge next to the title.
Can be a string or an object.
\`{ color: 'primary', variant: 'subtle' }\`{lang="ts-type"}`,type:"string"},billingCycle:{description:`The unit price period that appears next to the price.
Typically used to show the recurring interval.`,type:"string"},billingPeriod:{description:`Additional billing context that appears above the billing cycle.
Typically used to show the actual billing frequency.`,type:"string"},price:{description:"The current price of the plan.\nWhen used with `discount`, this becomes the original price.",type:"string"},discount:{description:"The discounted price of the plan.\nWhen provided, the `price` prop will be displayed as strikethrough.",type:"string"},features:{description:`Display a list of features under the price.
Can be an array of strings or an array of objects.`,type:"array",items:{type:"string"}},button:{description:"Display a buy button at the bottom.\n`{ size: 'lg', block: true }`{lang=\"ts-type\"}\nUse the `onClick` field to add a click handler.",type:"object",properties:{label:{type:"string"},color:{enum:["primary","secondary","success","info","warning","error","neutral"],type:"string"},activeColor:{type:"string",enum:["primary","secondary","success","info","warning","error","neutral"]},variant:{enum:["soft","solid","outline","subtle","link","ghost"],type:"string"},activeVariant:{type:"string",enum:["soft","solid","outline","subtle","link","ghost"]},size:{enum:["xs","sm","md","lg","xl"],type:"string"},square:{type:"boolean",description:"Render the button with equal padding on all sides."},block:{type:"boolean",description:"Render the button full width."},loadingAuto:{type:"boolean",description:"Set loading state automatically based on the `@click` promise state"},class:{},ui:{type:"object"},icon:{type:"string",description:"Display an icon based on the `leading` and `trailing` props."},avatar:{type:"object",properties:{as:{description:"The element or component this component should render as."},src:{type:"string"},alt:{type:"string"},icon:{type:"string"},text:{type:"string"},size:{enum:["3xs","2xs","xs","sm","md","lg","xl","2xl","3xl"],type:"string"},chip:{enum:[!1,!0],type:["boolean","ChipProps"]},class:{},style:{},ui:{type:"object"}},additionalProperties:!1,description:"Display an avatar on the left side."},leading:{type:"boolean",description:"When `true`, the icon will be displayed on the left side."},leadingIcon:{type:"string",description:"Display an icon on the left side."},trailing:{type:"boolean",description:"When `true`, the icon will be displayed on the right side."},trailingIcon:{type:"string",description:"Display an icon on the right side."},loading:{type:"boolean",description:"When `true`, the loading icon will be displayed."},loadingIcon:{type:"string",description:"The icon when the `loading` prop is `true`."},as:{description:"The element or component this component should render as when not a link."},replace:{type:"boolean",description:"Calls `router.replace` instead of `router.push`."},type:{enum:["button","submit","reset"],type:"string",description:"The type of the button when not a link."},to:{type:"string",description:"Route Location the link should navigate to when clicked on."},activeClass:{type:"string",description:"Class to apply when the link is active"},exactActiveClass:{type:"string",description:"Class to apply when the link is exact active"},ariaCurrentValue:{enum:["page","step","location","date","time","true","false"],type:"string",description:"Value passed to the attribute `aria-current` when the link is exact active."},viewTransition:{type:"boolean",description:"Pass the returned promise of `router.push()` to `document.startViewTransition()` if supported."},disabled:{type:"boolean"},active:{type:"boolean",description:"Force the link to be active independent of the current route."},exact:{type:"boolean",description:"Will only be active if the current route is an exact match."},exactQuery:{enum:[!1,!0,"partial"],type:["boolean","string"],description:"Allows controlling how the current route query sets the link as active."},exactHash:{type:"boolean",description:"Will only be active if the current route hash is an exact match."},inactiveClass:{type:"string",description:"The class to apply when the link is inactive."},href:{description:"An alias for `to`. If used with `to`, `href` will be ignored"},external:{type:"boolean",description:"Forces the link to be considered as external (true) or internal (false). This is helpful to handle edge-cases"},target:{anyOf:[{enum:["_blank","_parent","_self","_top"]},{allOf:[{type:"string"},{type:"object",additionalProperties:!1}]}],description:"Where to display the linked URL, as the name for a browsing context."},rel:{enum:["noopener","noreferrer","nofollow","sponsored","ugc"],type:"string",description:'A rel attribute value to apply on the link. Defaults to "noopener noreferrer" for external links.'},noRel:{type:"boolean",description:"If set to true, no rel attribute will be added to the link"},prefetchedClass:{type:"string",description:"A class to apply to links that have been prefetched."},prefetch:{type:"boolean",description:"When enabled will prefetch middleware, layouts and payloads of links in the viewport."},prefetchOn:{enum:["visibility","interaction"],type:"string",description:"Allows controlling when to prefetch links. By default, prefetch is triggered only on visibility."},noPrefetch:{type:"boolean",description:"Escape hatch to disable `prefetch` attribute."}},additionalProperties:!1},tagline:{description:"Display a tagline highlighting the pricing value proposition.",type:"string"},terms:{description:"Display terms at the bottom.",type:"string"},orientation:{description:"The orientation of the pricing plan.",enum:["horizontal","vertical"],type:"string",default:"vertical"},variant:{enum:["soft","solid","outline","subtle"],type:"string",default:"outline"},ui:{type:"object"},highlight:{description:"Display a ring around the pricing plan to highlight it.",type:"boolean"},scale:{description:"Enlarge the plan to make it more prominent.",type:"boolean"}}}},required:["solo","team","unlimited"],additionalProperties:!1},features:{type:"object",properties:{title:{type:"string"},description:{type:"string"},includes:{type:"object",properties:{projects:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},members:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},media:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},support:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},dedicated:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},roles:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},collaboration:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},sync:{type:"object",properties:{title:{type:"string"},includes:{type:"object",properties:{repositories:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},workflow:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1}},required:["repositories","workflow"],additionalProperties:!1}},required:["title","includes"],additionalProperties:!1},project:{type:"object",properties:{title:{type:"string"},includes:{type:"object",properties:{clone:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},import:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1}},required:["clone","import"],additionalProperties:!1}},required:["title","includes"],additionalProperties:!1},editors:{type:"object",properties:{title:{type:"string"},includes:{type:"object",properties:{markdown:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},json:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},appconfig:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},drag:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1}},required:["markdown","json","appconfig","drag"],additionalProperties:!1}},required:["title","includes"],additionalProperties:!1},preview:{type:"object",properties:{title:{type:"string"},includes:{type:"object",properties:{draft:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},branches:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},prs:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1}},required:["draft","branches","prs"],additionalProperties:!1}},required:["title","includes"],additionalProperties:!1},deploy:{type:"object",properties:{title:{type:"string"},includes:{type:"object",properties:{gh:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},self:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1}},required:["gh","self"],additionalProperties:!1}},required:["title","includes"],additionalProperties:!1},publish:{type:"object",properties:{title:{type:"string"},includes:{type:"object",properties:{preview:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},branch:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1},commit:{type:"object",properties:{title:{type:"string"},plans:{type:"array",items:{type:"string",enum:["solo","team","unlimited"]}},value:{type:"array",items:{type:"string"}},soon:{type:"boolean"}},required:["title"],additionalProperties:!1}},required:["preview","branch","commit"],additionalProperties:!1}},required:["title","includes"],additionalProperties:!1}},required:["projects","members","media","support","dedicated","roles","collaboration","sync","project","editors","preview","deploy","publish"],additionalProperties:!1}},required:["title","description","includes"],additionalProperties:!1}},required:["id","stem","extension","meta","path","title","description","body","onboarding","plans","features"],additionalProperties:!1}}},tableDefinition:`CREATE TABLE IF NOT EXISTS _content_pricing (id TEXT PRIMARY KEY, "title" VARCHAR, "body" TEXT, "description" VARCHAR, "extension" VARCHAR, "features" TEXT, "meta" TEXT, "navigation" TEXT DEFAULT true, "onboarding" TEXT, "path" VARCHAR, "plans" TEXT, "seo" TEXT DEFAULT '{}', "stem" VARCHAR, "__hash__" TEXT UNIQUE);`},templates:{name:"templates",pascalName:"Templates",tableName:"_content_templates",source:[{_resolved:!0,prefix:"/templates",include:"templates/*.md",cwd:"/home/runner/work/nuxt-content/nuxt-content/docs/content"}],type:"page",fields:{id:"string",title:"string",baseDir:"string",body:"json",branch:"string",category:"string",demo:"string",description:"string",draft:"boolean",extension:"string",image1:"string",image2:"string",image3:"string",licenseType:"string",mainScreen:"string",meta:"json",name:"string",navigation:"json",owner:"string",path:"string",seo:"json",slug:"string",stem:"string",subtitle:"string"},schema:{$schema:"http://json-schema.org/draft-07/schema#",$ref:"#/definitions/__SCHEMA__",definitions:{templates:{type:"object",properties:{id:{type:"string"},stem:{type:"string"},extension:{type:"string",enum:["md","yaml","yml","json","csv","xml"]},meta:{type:"object",additionalProperties:{}},path:{type:"string"},title:{type:"string"},description:{type:"string"},seo:{allOf:[{type:"object",properties:{title:{type:"string"},description:{type:"string"}}},{type:"object",additionalProperties:{}}],default:{}},body:{type:"object",properties:{type:{type:"string"},children:{},toc:{}},required:["type"],additionalProperties:!1},navigation:{anyOf:[{type:"boolean"},{type:"object",properties:{title:{type:"string"},description:{type:"string"},icon:{type:"string",$content:{editor:{input:"icon"}}}},required:["title","description","icon"],additionalProperties:!1}],default:!0},draft:{type:"boolean",default:!1},slug:{$content:{editor:{hidden:!0}},type:"string"},subtitle:{type:"string"},baseDir:{type:"string"},branch:{type:"string"},category:{type:"string",enum:["docs","blog","minimal","saas"]},demo:{type:"string"},licenseType:{type:"string",enum:["nuxt-ui-pro","free"]},mainScreen:{$content:{editor:{input:"media"}},type:"string"},name:{type:"string"},owner:{type:"string"},image1:{$content:{editor:{input:"media"}},type:"string"},image2:{$content:{editor:{input:"media"}},type:"string"},image3:{$content:{editor:{input:"media"}},type:"string"}},required:["id","stem","extension","meta","path","title","description","body","slug","subtitle","baseDir","branch","category","demo","licenseType","mainScreen","name","owner","image1","image2","image3"],additionalProperties:!1}}},tableDefinition:`CREATE TABLE IF NOT EXISTS _content_templates (id TEXT PRIMARY KEY, "title" VARCHAR, "baseDir" VARCHAR, "body" TEXT, "branch" VARCHAR, "category" VARCHAR, "demo" VARCHAR, "description" VARCHAR, "draft" BOOLEAN DEFAULT false, "extension" VARCHAR, "image1" VARCHAR, "image2" VARCHAR, "image3" VARCHAR, "licenseType" VARCHAR, "mainScreen" VARCHAR, "meta" TEXT, "name" VARCHAR, "navigation" TEXT DEFAULT true, "owner" VARCHAR, "path" VARCHAR, "seo" TEXT DEFAULT '{}', "slug" VARCHAR, "stem" VARCHAR, "subtitle" VARCHAR, "__hash__" TEXT UNIQUE);`},posts:{name:"posts",pascalName:"Posts",tableName:"_content_posts",source:[{_resolved:!0,prefix:"/blog",include:"blog/*.md",cwd:"/home/runner/work/nuxt-content/nuxt-content/docs/content"},{_resolved:!0,prefix:"/changelog",include:"changelog/*.md",cwd:"/home/runner/work/nuxt-content/nuxt-content/docs/content"}],type:"page",fields:{id:"string",title:"string",authors:"json",body:"json",categories:"json",category:"string",date:"date",description:"string",draft:"boolean",extension:"string",image:"json",meta:"json",navigation:"json",path:"string",seo:"json",stem:"string"},schema:{$schema:"http://json-schema.org/draft-07/schema#",$ref:"#/definitions/__SCHEMA__",definitions:{posts:{type:"object",properties:{id:{type:"string"},stem:{type:"string"},extension:{type:"string",enum:["md","yaml","yml","json","csv","xml"]},meta:{type:"object",additionalProperties:{}},path:{type:"string"},title:{type:"string"},description:{type:"string"},seo:{allOf:[{type:"object",properties:{title:{type:"string"},description:{type:"string"}}},{type:"object",additionalProperties:{}}],default:{}},body:{type:"object",properties:{type:{type:"string"},children:{},toc:{}},required:["type"],additionalProperties:!1},navigation:{anyOf:[{type:"boolean"},{type:"object",properties:{title:{type:"string"},description:{type:"string"},icon:{type:"string",$content:{editor:{input:"icon"}}}},required:["title","description","icon"],additionalProperties:!1}],default:!0},categories:{type:"array",items:{type:"string"}},draft:{type:"boolean",default:!1},authors:{type:"array",items:{type:"object",properties:{slug:{type:"string"},username:{type:"string"},name:{type:"string"},to:{type:"string"},avatar:{type:"object",properties:{src:{type:"string"},alt:{type:"string"}},required:["src","alt"],additionalProperties:!1}},required:["slug","username","name","to","avatar"],additionalProperties:!1}},category:{type:"string",enum:["studio","content"]},date:{type:"string",format:"date-time"},image:{type:"object",properties:{src:{$content:{editor:{input:"media"}},type:"string"},alt:{type:"string"}},required:["src","alt"],additionalProperties:!1}},required:["id","stem","extension","meta","path","title","description","body","categories","authors","date","image"],additionalProperties:!1}}},tableDefinition:`CREATE TABLE IF NOT EXISTS _content_posts (id TEXT PRIMARY KEY, "title" VARCHAR, "authors" TEXT, "body" TEXT, "categories" TEXT, "category" VARCHAR NULL, "date" DATE, "description" VARCHAR, "draft" BOOLEAN DEFAULT false, "extension" VARCHAR, "image" TEXT, "meta" TEXT, "navigation" TEXT DEFAULT true, "path" VARCHAR, "seo" TEXT DEFAULT '{}', "stem" VARCHAR, "__hash__" TEXT UNIQUE);`},info:{name:"info",pascalName:"Info",tableName:"_content_info",source:[],type:"data",fields:{},schema:{$ref:"#/definitions/info",definitions:{},$schema:"http://json-schema.org/draft-07/schema#"},tableDefinition:'CREATE TABLE IF NOT EXISTS _content_info (id TEXT PRIMARY KEY, "ready" BOOLEAN, "structureVersion" VARCHAR, "version" VARCHAR, "__hash__" TEXT UNIQUE);'}},Z=L(!1),fe=Tt(()=>JSON.parse(JSON.stringify(ve()))),Si=async n=>{const e=vt(n.files,n.additions,n.deletions),t=e.filter(o=>![j.appConfig,j.appConfigV4,j.nuxtConfig].includes(o.path));for(const o of Object.values(D))await S(o.name).exec(o.tableDefinition);for(const o of t)await Ni(D,o);const i=e.find(o=>[j.appConfig,j.appConfigV4].includes(o.path));i&&J(i.parsed),Qe(),Z.value=!0},Ni=async(n,e)=>{const{collection:t,matchedSource:i}=B(e.path,n);if(!t||!i){console.warn(`Content Preview: collection not found for file: ${e.path}, skipping insertion.`);return}const o=S(t.name),s=Ce(e,t,i),r=Me(t,s);await o.exec(r)},J=n=>{const e=z(),t=Ze(e,ve);_e(t,xt(n||{},fe)),n||Ee(t,fe)};function Mi(){const n=we().public.preview||{},e=window.sessionStorage.getItem("previewToken"),t=document.createElement("div");t.id="__nuxt_preview_wrapper",document.body.appendChild(t),Ge(pt,{previewToken:e,api:window.sessionStorage.getItem("previewAPI")||n?.api,initializePreview:Si}).mount(t)}function Ii(){const n=z(),e=we().public.preview;if(!window.parent||window.self===window.parent)return;const t=me(),i=Ye();window.addEventListener("keydown",s=>{(s.metaKey||s.ctrlKey||s.altKey||s.shiftKey)&&window.parent.postMessage({type:"nuxt-content:preview:keydown",payload:{key:s.key,metaKey:s.metaKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,altKey:s.altKey}},"*")}),window.addEventListener("message",async s=>{if(!Z.value)return;const r=e?.iframeMessagingAllowedOrigins?.split(",").map(d=>d.trim())||[];if(!["http://localhost:3000",...ki,...r].includes(s.origin))return;const{type:a,payload:l={},navigate:p}=s.data||{};switch(a){case"nuxt-content:editor:file-selected":{await c(l.path);break}case"nuxt-content:editor:file-changed":case"nuxt-content:editor:media-changed":{const{additions:d=[],deletions:g=[]}=l;for(const h of d)await y(h,p);for(const h of g)await u(h.path);Di();break}case"nuxt-content:config:file-changed":{const{additions:d=[],deletions:g=[]}=l,h=d.find(b=>[j.appConfig,j.appConfigV4].includes(b.path));h&&J(h?.parsed),g.find(b=>[j.appConfig,j.appConfigV4].includes(b.path))&&J(void 0)}}async function c(d){if(!d)return;const{collection:g}=B(H(d),D);if(!g){console.warn(`Content Preview: collection not found for file: ${d}, skipping navigation.`);return}if(g.type!=="page")return;const h=S(g.name),f=K(d),b=ye(g,"stem",f),x=await h.first(b);if(!x||!x.path)return;const m=t.resolve(x.path);!m||!m.matched||m.matched.length===0||x.path!==i.path&&t.push(x.path)}async function y(d,g){const{collection:h,matchedSource:f}=B(d.path,D);if(!h||!f){console.warn(`Content Preview: collection not found for file: ${d.path}, skipping update.`);return}const b=K(d.path),x=Ce({path:d.path,parsed:d.parsed},h,f),m=ji(h,b,x);if(await S(h.name).exec(m),h.type!=="page"||!d.pathRoute)return;const T=be(d.pathRoute);if(g&&T!==i.path){const C=t.resolve(T);if(!C||!C.matched||C.matched.length===0)return;t.push(T)}}async function u(d){const{collection:g}=B(H(d),D);if(!g){console.warn(`Content Preview: collection not found for file: ${d}, skipping deletion.`);return}const h=K(d),f=Ie(g,h);await S(g.name).exec(f)}});async function o(){if(!Z.value)return;const s=i.path,{collection:r}=Ci(s,D);if(!r||r.type!=="page"){window.sendNavigateMessageInPreview(s,!1);return}const a=S(r.name),l=ye(r,"path",s),p=await a.first(l);window.sendNavigateMessageInPreview(s,!!p?.path)}n.hook("page:finish",()=>{o()}),n.hook("nuxt-content:preview:ready",()=>{window.parent.postMessage({type:"nuxt-content:preview:ready"},"*")}),window.sendNavigateMessageInPreview=(s,r)=>{window.parent.postMessage({type:"nuxt-content:preview:navigate",payload:{path:s,navigate:r}},"*")}}async function Di(){await z().hooks.callHookParallel("app:data:refresh")}export{Ii as initIframeCommunication,Mi as mountPreviewUI};
