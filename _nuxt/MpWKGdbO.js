import{A as w,B as Ge,C as Ue,D as W,E as he,G as se,H as k,e as b,I as $,V as We,d as O,f as z,F as ae,J as le,K as Xe,L as ge,M as Je,N as ye,O as Qe,P as Ye,r as D,Q as Ke,R as ee,S as de,w as E,U as P,W as l,X as J,Y as Ze,Z as et,g as j,$ as Y,a0 as oe,a1 as tt,o as at,c as lt,a2 as Te,a3 as we,a4 as it,a5 as nt,a6 as U,a7 as pe,a8 as Fe,a9 as Ae,aa as st,z as Be,ab as ot,ac as ve,ad as $e,ae as Se,af as Pe,ag as He,ah as Ve,ai as Ie,n as B,aj as ne,ak as ke,t as ce,al as me,am as rt,an as ut,ao as dt,h as fe,ap as te,aq as ct,ar as ft,as as pt,at as vt,au as mt,av as ht,aw as gt,ax as yt,ay as bt,az as _t,aA as qe,aB as xt,aC as Lt,aD as St,aE as It,aF as kt}from"#entry";import{f as qt}from"./lDCt5PN4.js";import{F as Ct}from"./Dw8P0qyA.js";import{_ as Et}from"./BdQaGOCD.js";function Kt(n){return w(()=>Ge(n)?!!Ue(n)?.closest("form"):!0)}function Tt(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}var wt=W({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(n){const s=n,{primitiveElement:e,currentElement:d}=he(),r=w(()=>s.checked??s.value);return se(r,(i,u)=>{if(!d.value)return;const c=d.value,p=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(p,"value").set;if(a&&i!==u){const m=new Event("input",{bubbles:!0}),v=new Event("change",{bubbles:!0});a.call(c,i),c.dispatchEvent(m),c.dispatchEvent(v)}}),(i,u)=>(b(),k(We,$({ref_key:"primitiveElement",ref:e},{...s,...i.$attrs},{as:"input"}),null,16))}}),Ce=wt,Ft=W({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(n){const s=n,e=w(()=>typeof s.value=="object"&&Array.isArray(s.value)&&s.value.length===0&&s.required),d=w(()=>typeof s.value=="string"||typeof s.value=="number"||typeof s.value=="boolean"||s.value===null||s.value===void 0?[{name:s.name,value:s.value}]:typeof s.value=="object"&&Array.isArray(s.value)?s.value.flatMap((r,i)=>typeof r=="object"?Object.entries(r).map(([u,c])=>({name:`${s.name}[${i}][${u}]`,value:c})):{name:`${s.name}[${i}]`,value:r}):s.value!==null&&typeof s.value=="object"&&!Array.isArray(s.value)?Object.entries(s.value).map(([r,i])=>({name:`${s.name}[${r}]`,value:i})):[]);return(r,i)=>(b(),O(ae,null,[z(" We render single input if it's required "),e.value?(b(),k(Ce,$({key:r.name},{...s,...r.$attrs},{name:r.name,value:r.value}),null,16,["name","value"])):(b(!0),O(ae,{key:1},le(d.value,u=>(b(),k(Ce,$({key:u.name},{ref_for:!0},{...s,...r.$attrs},{name:u.name,value:u.value}),null,16,["name","value"]))),128))],2112))}}),At=Ft;function Bt(n,s,e){return n===void 0?!1:Array.isArray(n)?n.some(d=>ie(d,s,e)):ie(n,s,e)}function ie(n,s,e){return n===void 0||s===void 0?!1:typeof n=="string"?n===s:typeof e=="function"?e(n,s):typeof e=="string"?n?.[e]===s?.[e]:Xe(n,s)}const[be,$t]=ge("ListboxRoot");var Pt=W({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:s,emit:e}){const d=n,r=e,{multiple:i,highlightOnHover:u,orientation:c,disabled:p,selectionBehavior:K,dir:a}=Je(d),{getItems:m}=ye({isProvider:!0}),{handleTypeaheadSearch:v}=Qe(),{primitiveElement:H,currentElement:h}=he(),q=Tt(),R=Ye(a),X=Kt(h),N=D(),M=D(!1),x=D(!0),f=Ke(d,"modelValue",r,{defaultValue:d.defaultValue??(i.value?[]:void 0),passive:d.modelValue===void 0,deep:!0});function I(o){if(M.value=!0,d.multiple){const y=Array.isArray(f.value)?[...f.value]:[],_=y.findIndex(F=>ie(F,o,d.by));d.selectionBehavior==="toggle"?(_===-1?y.push(o):y.splice(_,1),f.value=y):(f.value=[o],N.value=o)}else d.selectionBehavior==="toggle"&&ie(f.value,o,d.by)?f.value=void 0:f.value=o;setTimeout(()=>{M.value=!1},1)}const L=D(null),g=D(null),C=D(!1),S=D(!1),t=de(),A=de(),T=de();function G(){return m().map(o=>o.ref).filter(o=>o.dataset.disabled!=="")}function V(o,y=!0){if(!o)return;L.value=o,x.value&&L.value.focus(),y&&L.value.scrollIntoView({block:"nearest"});const _=m().find(F=>F.ref===o);r("highlight",_)}function re(o){if(C.value)T.trigger(o);else{const y=m().find(_=>ie(_.value,o,d.by));y&&(L.value=y.ref,V(y.ref))}}function Re(o){L.value&&L.value.isConnected&&(o.preventDefault(),o.stopPropagation(),S.value||L.value.click())}function Me(o){if(x.value){if(M.value=!0,C.value)A.trigger(o);else{const y=o.altKey||o.ctrlKey||o.metaKey;if(y&&o.key==="a"&&i.value){const _=m(),F=_.map(Q=>Q.value);f.value=[...F],o.preventDefault(),V(_[_.length-1].ref)}else if(!y){const _=v(o.key,m());_&&V(_)}}setTimeout(()=>{M.value=!1},1)}}function Oe(){S.value=!0}function ze(){ee(()=>{S.value=!1})}function _e(){ee(()=>{const o=new KeyboardEvent("keydown",{key:"PageUp"});xe(o)})}function ue(o){const y=L.value;y?.isConnected&&(g.value=y),L.value=null,r("leave",o)}function De(o){const y=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(o.currentTarget?.dispatchEvent(y),r("entryFocus",y),!y.defaultPrevented)if(g.value)V(g.value);else{const _=G()?.[0];V(_)}}function xe(o){const y=Ze(o,c.value,R.value);if(!y)return;let _=G();if(L.value){if(y==="last")_.reverse();else if(y==="prev"||y==="next"){y==="prev"&&_.reverse();const F=_.indexOf(L.value);_=_.slice(F+1)}je(o,_[0])}if(_.length){const F=!L.value&&y==="prev"?_.length-1:0;V(_[F])}if(C.value)return A.trigger(o)}function je(o,y){if(!(C.value||d.selectionBehavior!=="replace"||!i.value||!Array.isArray(f.value)||(o.altKey||o.ctrlKey||o.metaKey)&&!o.shiftKey)&&o.shiftKey){const F=m().filter(Z=>Z.ref.dataset.disabled!=="");let Q=F.find(Z=>Z.ref===y)?.value;if(o.key===q.END?Q=F[F.length-1].value:o.key===q.HOME&&(Q=F[0].value),!Q||!N.value)return;const Ne=qt(F.map(Z=>Z.value),N.value,Q);f.value=Ne}}async function Le(o){if(await ee(),C.value)t.trigger(o);else{const y=G(),_=y.find(F=>F.dataset.state==="checked");_?V(_):y.length&&V(y[0])}}return se(f,()=>{M.value||ee(()=>{Le()})},{immediate:!0,deep:!0}),s({highlightedElement:L,highlightItem:re,highlightFirstItem:_e,highlightSelected:Le,getItems:m}),$t({modelValue:f,onValueChange:I,multiple:i,orientation:c,dir:R,disabled:p,highlightOnHover:u,highlightedElement:L,isVirtual:C,virtualFocusHook:t,virtualKeydownHook:A,virtualHighlightHook:T,by:d.by,firstValue:N,selectionBehavior:K,focusable:x,onLeave:ue,onEnter:De,changeHighlight:V,onKeydownEnter:Re,onKeydownNavigation:xe,onKeydownTypeAhead:Me,onCompositionStart:Oe,onCompositionEnd:ze,highlightFirstItem:_e}),(o,y)=>(b(),k(l(J),{ref_key:"primitiveElement",ref:H,as:o.as,"as-child":o.asChild,dir:l(R),"data-disabled":l(p)?"":void 0,onPointerleave:ue,onFocusout:y[0]||(y[0]=async _=>{const F=_.relatedTarget||_.target;await ee(),L.value&&l(h)&&!l(h).contains(F)&&ue(_)})},{default:E(()=>[P(o.$slots,"default",{modelValue:l(f)}),l(X)&&o.name?(b(),k(l(At),{key:0,name:o.name,value:l(f),disabled:l(p),required:o.required},null,8,["name","value","disabled","required"])):z("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),Ht=Pt,Vt=W({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const{CollectionSlot:s}=ye(),e=be(),d=et(!1,10);return(r,i)=>(b(),k(l(s),null,{default:E(()=>[j(l(J),{role:"listbox",as:r.as,"as-child":r.asChild,tabindex:l(e).focusable.value?l(e).highlightedElement.value?"-1":"0":void 0,"aria-orientation":l(e).orientation.value,"aria-multiselectable":!!l(e).multiple.value,"data-orientation":l(e).orientation.value,onMousedown:i[0]||(i[0]=oe(u=>d.value=!0,["left"])),onFocus:i[1]||(i[1]=u=>{l(d)||l(e).onEnter(u)}),onKeydown:[i[2]||(i[2]=Y(oe(u=>{l(e).focusable.value&&l(e).onKeydownNavigation(u)},["prevent"]),["down","up","left","right","home","end"])),Y(l(e).onKeydownEnter,["enter"]),l(e).onKeydownTypeAhead]},{default:E(()=>[P(r.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),Rt=Vt,Mt=W({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(n,{emit:s}){const e=n,r=Ke(e,"modelValue",s,{defaultValue:"",passive:e.modelValue===void 0}),i=be(),{primitiveElement:u,currentElement:c}=he(),p=w(()=>e.disabled||i.disabled.value||!1),K=D();return tt(()=>K.value=i.highlightedElement.value?.id),at(()=>{i.focusable.value=!1,setTimeout(()=>{e.autoFocus&&c.value?.focus()},1)}),lt(()=>{i.focusable.value=!0}),(a,m)=>(b(),k(l(J),{ref_key:"primitiveElement",ref:u,as:a.as,"as-child":a.asChild,value:l(r),disabled:p.value?"":void 0,"data-disabled":p.value?"":void 0,"aria-disabled":p.value??void 0,"aria-activedescendant":K.value,type:"text",onKeydown:[Y(oe(l(i).onKeydownNavigation,["prevent"]),["down","up","home","end"]),Y(l(i).onKeydownEnter,["enter"])],onInput:m[0]||(m[0]=v=>{r.value=v.target.value,l(i).highlightFirstItem()}),onCompositionstart:l(i).onCompositionStart,onCompositionend:l(i).onCompositionEnd},{default:E(()=>[P(a.$slots,"default",{modelValue:l(r)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),Ot=Mt;const[zt,Dt]=ge("ListboxGroup");var jt=W({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const s=n,e=Te(void 0,"reka-listbox-group");return Dt({id:e}),(d,r)=>(b(),k(l(J),$({role:"group"},s,{"aria-labelledby":l(e)}),{default:E(()=>[P(d.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),Nt=jt,Gt=W({__name:"ListboxGroupLabel",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(n){const s=n,e=zt({id:""});return(d,r)=>(b(),k(l(J),$(s,{id:l(e).id}),{default:E(()=>[P(d.$slots,"default")]),_:3},16,["id"]))}}),Ut=Gt;const Wt="listbox.select",[Xt,Jt]=ge("ListboxItem");var Qt=W({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(n,{emit:s}){const e=n,d=s,r=Te(void 0,"reka-listbox-item"),{CollectionItem:i}=ye(),{forwardRef:u,currentElement:c}=we(),p=be(),K=w(()=>c.value===p.highlightedElement.value),a=w(()=>Bt(p.modelValue.value,e.value,p.by)),m=w(()=>p.disabled.value||e.disabled);async function v(h){d("select",h),!h?.defaultPrevented&&!m.value&&h&&(p.onValueChange(e.value),p.changeHighlight(c.value))}function H(h){const q={originalEvent:h,value:e.value};nt(Wt,v,q)}return Jt({isSelected:a}),(h,q)=>(b(),k(l(i),{value:h.value},{default:E(()=>[it([K.value,a.value],()=>j(l(J),$({id:l(r)},h.$attrs,{ref:l(u),role:"option",tabindex:l(p).focusable.value?K.value?"0":"-1":-1,"aria-selected":a.value,as:h.as,"as-child":h.asChild,disabled:m.value?"":void 0,"data-disabled":m.value?"":void 0,"data-highlighted":K.value?"":void 0,"data-state":a.value?"checked":"unchecked",onClick:H,onKeydown:Y(oe(H,["prevent"]),["space"]),onPointermove:q[0]||(q[0]=R=>{l(p).highlightedElement.value!==l(c)&&(l(p).highlightOnHover.value?l(p).changeHighlight(l(c),!1):l(p).focusable.value||l(p).changeHighlight(l(c),!1))})}),{default:E(()=>[P(h.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),q,1)]),_:3},8,["value"]))}}),Yt=Qt,Zt=W({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const s=n;we();const e=Xt();return(d,r)=>l(e).isSelected.value?(b(),k(l(J),$({key:0,"aria-hidden":"true"},s),{default:E(()=>[P(d.$slots,"default")]),_:3},16)):z("v-if",!0)}}),ea=Zt;function ta(n,s,e){const d=()=>{var u,c;return new Ct((u=U(s))!=null?u:[],(c=U(e))==null?void 0:c.fuseOptions)},r=D(d());se(()=>{var u;return(u=U(e))==null?void 0:u.fuseOptions},()=>{r.value=d()},{deep:!0}),se(()=>U(s),u=>{r.value.setCollection(u)},{deep:!0});const i=w(()=>{const u=U(e);if(u?.matchAllWhenSearchEmpty&&!U(n))return U(s).map((p,K)=>({item:p,refIndex:K}));const c=u?.resultLimit;return r.value.search(U(n),c?{limit:c}:void 0)});return{fuse:r,results:i}}function aa(n,s){let e="",d=0,r=!1;for(let i=n.length-1;i>=0;i--){if(n[i]===">")r=!0;else if(n[i]==="<"){r=!1,e=n[i]+e;continue}if(r||d++,d<=s)e=n[i]+e;else{e="..."+e;break}}return e}function Ee(n,s,e,d){function r(i,u=[]){i=i||"";let c="",p=0;u.forEach(a=>{if(a.length===2&&a[0]===a[1])return;const m=a[1]+1,v=m-a[0]>=s.length;c+=[i.substring(p,a[0]),v&&"<mark>",i.substring(a[0],m),v&&"</mark>"].filter(Boolean).join(""),p=m}),c+=i.substring(p);const K=c.indexOf("<mark>");return K!==-1&&(c=aa(c,c.length-K)),c}if(n.matches?.length){for(const i of n.matches)if(!(e&&i.key!==e)&&!d?.includes(i.key))return r(i.value,i.indices)}}const la={slots:{root:"flex flex-col min-h-0 min-w-0 divide-y divide-default",input:"[&>input]:h-12",close:"",back:"p-0",content:"relative overflow-hidden flex flex-col",footer:"p-1",viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1 focus:outline-none",group:"p-1 isolate",empty:"py-6 text-center text-sm text-muted",label:"p-1.5 text-xs font-semibold text-highlighted",item:"group relative w-full flex items-center gap-1.5 p-1.5 text-sm select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75",itemLeadingIcon:"shrink-0 size-5",itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"2xs",itemLeadingChip:"shrink-0 size-5",itemLeadingChipSize:"md",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0 size-5",itemTrailingHighlightedIcon:"shrink-0 size-5 text-dimmed hidden group-data-highlighted:inline-flex",itemTrailingKbds:"hidden lg:inline-flex items-center shrink-0 gap-0.5",itemTrailingKbdsSize:"md",itemLabel:"truncate space-x-1 text-dimmed",itemLabelBase:"text-highlighted [&>mark]:text-inverted [&>mark]:bg-primary",itemLabelPrefix:"text-default",itemLabelSuffix:"text-dimmed [&>mark]:text-inverted [&>mark]:bg-primary"},variants:{active:{true:{item:"text-highlighted before:bg-elevated",itemLeadingIcon:"text-default"},false:{item:["text-default data-highlighted:not-data-disabled:text-highlighted data-highlighted:not-data-disabled:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["text-dimmed group-data-highlighted:not-group-data-disabled:text-default","transition-colors"]}},loading:{true:{itemLeadingIcon:"animate-spin"}}}},ia=["innerHTML"],na=["innerHTML"],sa={__name:"UCommandPalette",props:pe({as:{type:null,required:!1},icon:{type:String,required:!1},selectedIcon:{type:String,required:!1},trailingIcon:{type:String,required:!1},placeholder:{type:String,required:!1},autofocus:{type:Boolean,required:!1,default:!0},close:{type:[Boolean,Object],required:!1},closeIcon:{type:String,required:!1},back:{type:[Boolean,Object],required:!1,default:!0},backIcon:{type:String,required:!1},groups:{type:Array,required:!1},fuse:{type:Object,required:!1},labelKey:{type:String,required:!1,default:"label"},class:{type:null,required:!1},ui:{type:null,required:!1},multiple:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},modelValue:{type:null,required:!1,default:""},defaultValue:{type:null,required:!1},highlightOnHover:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},{searchTerm:{type:String,default:""},searchTermModifiers:{}}),emits:pe(["update:modelValue","highlight","entryFocus","leave","update:open"],["update:searchTerm"]),setup(n,{emit:s}){const e=n,d=s,r=Fe(),i=Ae(n,"searchTerm",{type:String,default:""}),{t:u}=st(),c=Be(),p=ot(ve(e,"as","disabled","multiple","modelValue","defaultValue","highlightOnHover","selectionBehavior"),d),K=$e(ve(e,"loading","loadingIcon")),a=w(()=>Se({extend:Se(la),...c.ui?.commandPalette||{}})()),m=w(()=>Pe({},e.fuse,{fuseOptions:{ignoreLocation:!0,threshold:.1,keys:[e.labelKey,"suffix"]},resultLimit:12,matchAllWhenSearchEmpty:!0})),v=D([]),H=w(()=>v.value[v.value.length-1]?.placeholder||e.placeholder||u("commandPalette.placeholder")),h=w(()=>v.value?.length?[v.value[v.value.length-1]]:e.groups),q=w(()=>h.value?.filter(g=>g.id?!g.ignoreFilter:(console.warn("[@nuxt/ui] CommandPalette group is missing an `id` property"),!1))?.flatMap(g=>g.items?.map(C=>({...C,group:g.id}))||[])||[]),{results:R}=ta(i,q,m);function X(g,C){return g?.postFilter&&typeof g.postFilter=="function"&&(C=g.postFilter(i.value,C)),{...g,items:C.slice(0,m.value.resultLimit).map(S=>({...S,labelHtml:Ee(S,i.value,e.labelKey),suffixHtml:Ee(S,i.value,void 0,[e.labelKey])}))}}const N=w(()=>{const g=R.value.reduce((t,A)=>{const{item:T,matches:G}=A;return T.group&&(t[T.group]||=[],t[T.group]?.push({...T,matches:G})),t},{}),C=Object.entries(g).map(([t,A])=>{const T=h.value?.find(G=>G.id===t);if(T)return X(T,A)}).filter(t=>!!t);return(h.value?.map((t,A)=>({...t,index:A}))?.filter(t=>t.ignoreFilter&&t.items?.length)?.map(t=>({...X(t,t.items||[]),index:t.index}))||[]).reduce((t,A)=>(t.splice(A.index,0,A),t),[...C])}),M=He("listboxRootRef");function x(g){g.children?.length&&(v.value.push({id:`history-${v.value.length}`,label:g.label,slot:g.slot,placeholder:g.placeholder,items:g.children}),i.value="",M.value?.highlightFirstItem())}function f(){v.value.length&&(v.value.pop(),i.value="",M.value?.highlightFirstItem())}function I(){i.value||f()}function L(g,C){C.children?.length?(g.preventDefault(),x(C)):C.onSelect?.(g)}return(g,C)=>(b(),k(l(Ht),$(l(p),{ref_key:"listboxRootRef",ref:M,class:a.value.root({class:[e.ui?.root,e.class]})}),{default:E(()=>[j(l(Ot),{modelValue:i.value,"onUpdate:modelValue":C[1]||(C[1]=S=>i.value=S),"as-child":""},{default:E(()=>[j(Et,$({placeholder:H.value,variant:"none",autofocus:n.autofocus},l(K),{icon:n.icon||l(c).ui.icons.search,class:a.value.input({class:e.ui?.input}),onKeydown:Y(I,["backspace"])}),Ve({_:2},[v.value?.length&&(n.back||r.back)?{name:"leading",fn:E(()=>[P(g.$slots,"back",{ui:a.value},()=>[j(Ie,$({icon:n.backIcon||l(c).ui.icons.arrowLeft,color:"neutral",variant:"link","aria-label":l(u)("commandPalette.back")},typeof n.back=="object"?n.back:{},{class:a.value.back({class:e.ui?.back}),onClick:f}),null,16,["icon","aria-label","class"])])]),key:"0"}:void 0,n.close||r.close?{name:"trailing",fn:E(()=>[P(g.$slots,"close",{ui:a.value},()=>[n.close?(b(),k(Ie,$({key:0,icon:n.closeIcon||l(c).ui.icons.close,color:"neutral",variant:"ghost","aria-label":l(u)("commandPalette.close")},typeof n.close=="object"?n.close:{},{class:a.value.close({class:e.ui?.close}),onClick:C[0]||(C[0]=S=>d("update:open",!1))}),null,16,["icon","aria-label","class"])):z("",!0)])]),key:"1"}:void 0]),1040,["placeholder","autofocus","icon","class"])]),_:3},8,["modelValue"]),j(l(Rt),{class:B(a.value.content({class:e.ui?.content}))},{default:E(()=>[N.value?.length?(b(),O("div",{key:0,role:"presentation",class:B(a.value.viewport({class:e.ui?.viewport}))},[(b(!0),O(ae,null,le(N.value,S=>(b(),k(l(Nt),{key:`group-${S.id}`,class:B(a.value.group({class:e.ui?.group}))},{default:E(()=>[l(ne)(S,e.labelKey)?(b(),k(l(Ut),{key:0,class:B(a.value.label({class:e.ui?.label}))},{default:E(()=>[ke(ce(l(ne)(S,e.labelKey)),1)]),_:2},1032,["class"])):z("",!0),(b(!0),O(ae,null,le(S.items,(t,A)=>(b(),k(l(Yt),{key:`group-${S.id}-${A}`,value:l(me)(t,["matches","group","onSelect","labelHtml","suffixHtml","children"]),disabled:t.disabled,"as-child":"",onSelect:T=>L(T,t)},{default:E(()=>[j(rt,$({ref_for:!0},l(ut)(t),{custom:""}),{default:E(({active:T,...G})=>[j(dt,$({ref_for:!0},G,{class:a.value.item({class:[e.ui?.item,t.ui?.item,t.class],active:T||t.active})}),{default:E(()=>[P(g.$slots,t.slot||S.slot||"item",{item:t,index:A},()=>[P(g.$slots,t.slot?`${t.slot}-leading`:S.slot?`${S.slot}-leading`:"item-leading",{item:t,index:A},()=>[t.loading?(b(),k(te,{key:0,name:n.loadingIcon||l(c).ui.icons.loading,class:B(a.value.itemLeadingIcon({class:[e.ui?.itemLeadingIcon,t.ui?.itemLeadingIcon],loading:!0}))},null,8,["name","class"])):t.icon?(b(),k(te,{key:1,name:t.icon,class:B(a.value.itemLeadingIcon({class:[e.ui?.itemLeadingIcon,t.ui?.itemLeadingIcon],active:T||t.active}))},null,8,["name","class"])):t.avatar?(b(),k(ct,$({key:2,size:t.ui?.itemLeadingAvatarSize||e.ui?.itemLeadingAvatarSize||a.value.itemLeadingAvatarSize()},{ref_for:!0},t.avatar,{class:a.value.itemLeadingAvatar({class:[e.ui?.itemLeadingAvatar,t.ui?.itemLeadingAvatar],active:T||t.active})}),null,16,["size","class"])):t.chip?(b(),k(ft,$({key:3,size:t.ui?.itemLeadingChipSize||e.ui?.itemLeadingChipSize||a.value.itemLeadingChipSize(),inset:"",standalone:""},{ref_for:!0},t.chip,{class:a.value.itemLeadingChip({class:[e.ui?.itemLeadingChip,t.ui?.itemLeadingChip],active:T||t.active})}),null,16,["size","class"])):z("",!0)]),t.labelHtml||l(ne)(t,e.labelKey)||r[t.slot?`${t.slot}-label`:S.slot?`${S.slot}-label`:"item-label"]?(b(),O("span",{key:0,class:B(a.value.itemLabel({class:[e.ui?.itemLabel,t.ui?.itemLabel],active:T||t.active}))},[P(g.$slots,t.slot?`${t.slot}-label`:S.slot?`${S.slot}-label`:"item-label",{item:t,index:A},()=>[t.prefix?(b(),O("span",{key:0,class:B(a.value.itemLabelPrefix({class:[e.ui?.itemLabelPrefix,t.ui?.itemLabelPrefix]}))},ce(t.prefix),3)):z("",!0),fe("span",{class:B(a.value.itemLabelBase({class:[e.ui?.itemLabelBase,t.ui?.itemLabelBase],active:T||t.active})),innerHTML:t.labelHtml||l(ne)(t,e.labelKey)},null,10,ia),fe("span",{class:B(a.value.itemLabelSuffix({class:[e.ui?.itemLabelSuffix,t.ui?.itemLabelSuffix],active:T||t.active})),innerHTML:t.suffixHtml||t.suffix},null,10,na)])],2)):z("",!0),fe("span",{class:B(a.value.itemTrailing({class:[e.ui?.itemTrailing,t.ui?.itemTrailing]}))},[P(g.$slots,t.slot?`${t.slot}-trailing`:S.slot?`${S.slot}-trailing`:"item-trailing",{item:t,index:A},()=>[t.children&&t.children.length>0?(b(),k(te,{key:0,name:n.trailingIcon||l(c).ui.icons.chevronRight,class:B(a.value.itemTrailingIcon({class:[e.ui?.itemTrailingIcon,t.ui?.itemTrailingIcon]}))},null,8,["name","class"])):t.kbds?.length?(b(),O("span",{key:1,class:B(a.value.itemTrailingKbds({class:[e.ui?.itemTrailingKbds,t.ui?.itemTrailingKbds]}))},[(b(!0),O(ae,null,le(t.kbds,(V,re)=>(b(),k(pt,$({key:re,size:t.ui?.itemTrailingKbdsSize||e.ui?.itemTrailingKbdsSize||a.value.itemTrailingKbdsSize()},{ref_for:!0},typeof V=="string"?{value:V}:V),null,16,["size"]))),128))],2)):S.highlightedIcon?(b(),k(te,{key:2,name:S.highlightedIcon,class:B(a.value.itemTrailingHighlightedIcon({class:[e.ui?.itemTrailingHighlightedIcon,t.ui?.itemTrailingHighlightedIcon]}))},null,8,["name","class"])):z("",!0)]),t.children?.length?z("",!0):(b(),k(l(ea),{key:0,"as-child":""},{default:E(()=>[j(te,{name:n.selectedIcon||l(c).ui.icons.check,class:B(a.value.itemTrailingIcon({class:[e.ui?.itemTrailingIcon,t.ui?.itemTrailingIcon]}))},null,8,["name","class"])]),_:2},1024))],2)])]),_:2},1040,["class"])]),_:2},1040)]),_:2},1032,["value","disabled","onSelect"]))),128))]),_:2},1032,["class"]))),128))],2)):(b(),O("div",{key:1,class:B(a.value.empty({class:e.ui?.empty}))},[P(g.$slots,"empty",{searchTerm:i.value},()=>[ke(ce(i.value?l(u)("commandPalette.noMatch",{searchTerm:i.value}):l(u)("commandPalette.noData")),1)])],2))]),_:3},8,["class"]),r.footer?(b(),O("div",{key:0,class:B(a.value.footer({class:e.ui?.footer}))},[P(g.$slots,"footer",{ui:a.value})],2)):z("",!0)]),_:3},16,["class"]))}},oa={slots:{modal:"sm:max-w-3xl sm:h-[28rem]",input:"[&>input]:text-base/5"}},ra=/^[^-]+.*-.*[^-]+$/,ua=/^[^_]+.*_.*[^_]+$/,da=["arrowleft","arrowright","arrowup","arrowright","tab","escape","enter","backspace"];function ca(n,s={}){const e=D([]),d=()=>{e.value.splice(0,e.value.length)},r=vt(d,s.chainDelay??800),{macOS:i}=mt(),u=ht(),c=a=>{if(!a.key)return;const m=/^[a-z]{1}$/i.test(a.key),v=da.includes(a.key.toLowerCase());let H;if(e.value.push(a.key),e.value.length>=2){H=e.value.slice(-2).join("-");for(const h of K.value.filter(q=>q.chained))if(h.key===H){h.enabled&&(a.preventDefault(),h.handler(a)),d();return}}for(const h of K.value.filter(q=>!q.chained))if(a.key.toLowerCase()===h.key&&a.metaKey===h.metaKey&&a.ctrlKey===h.ctrlKey&&!((m||v)&&a.shiftKey!==h.shiftKey)){h.enabled&&(a.preventDefault(),h.handler(a)),d();return}r()},p=w(()=>{const a=u.value?.tagName,m=u.value?.contentEditable;return a==="INPUT"||a==="TEXTAREA"||m==="true"||m==="plaintext-only"?u.value?.name||!0:!1}),K=w(()=>Object.entries(U(n)).map(([a,m])=>{if(!m)return null;let v;a.includes("-")&&a!=="-"&&!a.includes("_")&&!a.match(ra)?.length&&console.trace(`[Shortcut] Invalid key: "${a}"`),a.includes("_")&&a!=="_"&&!a.match(ua)?.length&&console.trace(`[Shortcut] Invalid key: "${a}"`);const H=a.includes("-")&&a!=="-"&&!a.includes("_");if(H)v={key:a.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const q=a.toLowerCase().split("_").map(R=>R);v={key:q.filter(R=>!["meta","command","ctrl","shift","alt","option"].includes(R)).join("_"),metaKey:q.includes("meta")||q.includes("command"),ctrlKey:q.includes("ctrl"),shiftKey:q.includes("shift"),altKey:q.includes("alt")||q.includes("option")}}if(v.chained=H,!i.value&&v.metaKey&&!v.ctrlKey&&(v.metaKey=!1,v.ctrlKey=!0),typeof m=="function"?v.handler=m:typeof m=="object"&&(v={...v,handler:m.handler}),!v.handler)return console.trace("[Shortcut] Invalid value"),null;let h=!0;return m.usingInput?typeof m.usingInput=="string"&&(h=p.value===m.usingInput):h=!p.value,v.enabled=h,v}).filter(Boolean));return gt("keydown",c)}const ha={__name:"UContentSearch",props:pe({icon:{type:String,required:!1},placeholder:{type:null,required:!1},autofocus:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1},close:{type:[Boolean,Object],required:!1,default:!0},closeIcon:{type:String,required:!1},shortcut:{type:String,required:!1,default:"meta_k"},links:{type:Array,required:!1},navigation:{type:Array,required:!1},groups:{type:Array,required:!1},files:{type:Array,required:!1},fuse:{type:Object,required:!1},colorMode:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},ui:{type:void 0,required:!1}},{searchTerm:{type:String,default:""},searchTermModifiers:{}}),emits:["update:searchTerm"],setup(n,{expose:s}){const e=n,d=Fe(),r=Ae(n,"searchTerm",{type:String,default:""}),{t:i}=yt(),{open:u}=bt(),c=_t(),p=Be(),K=$e(ve(e,"icon","placeholder","autofocus","loading","loadingIcon","close","closeIcon")),a=me(d,["content"]),m=w(()=>Pe({},e.fuse,{fuseOptions:{includeMatches:!0}})),v=w(()=>qe({extend:qe(oa),...p.uiPro?.contentSearch||{}})());function H(x){return x.flatMap(f=>[{...f,suffix:f.description,icon:f.icon||p.ui.icons.file},...f.children?.map(I=>({...I,prefix:f.label+" >",suffix:I.description,icon:I.icon||f.icon||p.ui.icons.file}))||[]])}function h(x,f){return x.flatMap(I=>I.children?.length?h(I.children,I):e.files?.filter(L=>L.id===I.path||L.id.startsWith(`${I.path}#`))?.map(L=>q(L,I,f))||[])}function q(x,f,I){const L=[...new Set([I?.title,...x.titles].filter(Boolean))];return{prefix:L?.length?L.join(" > ")+" >":void 0,label:x.id===f.path?f.title:x.title,suffix:x.content.replaceAll("<","&lt;").replaceAll(">","&gt;"),to:x.id,icon:f.icon||I?.icon||(x.level>1?p.ui.icons.hash:p.ui.icons.file),level:x.level}}const R=w(()=>{const x=[];return e.links?.length&&x.push({id:"links",label:i("contentSearch.links"),items:H(e.links)}),e.navigation?.length&&(e.navigation.some(f=>!!f.children?.length)?x.push(...e.navigation.map(f=>({id:f.path,label:f.title,items:h(f.children||[]),postFilter:X}))):x.push({id:"docs",items:h(e.navigation),postFilter:X})),x.push(...e.groups||[]),e.colorMode&&!c?.forced&&x.push({id:"theme",label:i("contentSearch.theme"),items:[{label:i("colorMode.system"),icon:p.ui.icons.system,active:c.preference==="system",onSelect:()=>{c.preference="system"}},{label:i("colorMode.light"),icon:p.ui.icons.light,active:c.preference==="light",onSelect:()=>{c.preference="light"}},{label:i("colorMode.dark"),icon:p.ui.icons.dark,active:c.preference==="dark",onSelect:()=>{c.preference="dark"}}]}),x});function X(x,f){return x?f:f?.filter(I=>I.level===1)}function N(x){x.disabled||(u.value=!1,r.value="")}ca({[e.shortcut]:{usingInput:!0,handler:()=>u.value=!u.value}});const M=He("commandPaletteRef");return s({commandPaletteRef:M}),(x,f)=>(b(),k(kt,{open:l(u),"onUpdate:open":f[2]||(f[2]=I=>It(u)?u.value=I:null),title:l(i)("contentSearch.title"),description:l(i)("contentSearch.description"),class:B(v.value.modal({class:[e.ui?.modal,e.class]}))},{content:E(()=>[P(x.$slots,"content",{},()=>[j(sa,$({ref_key:"commandPaletteRef",ref:M,"search-term":r.value,"onUpdate:searchTerm":f[0]||(f[0]=I=>r.value=I)},l(K),{groups:R.value,fuse:m.value,ui:l(xt)(l(me)(v.value,["modal"]),e.ui),"onUpdate:modelValue":N,"onUpdate:open":f[1]||(f[1]=I=>u.value=I)}),Ve({_:2},[le(l(a),(I,L)=>({name:L,fn:E(g=>[P(x.$slots,L,Lt(St(g)))])}))]),1040,["search-term","groups","fuse","ui"])])]),_:3},8,["open","title","description","class"]))}};export{ha as default};
